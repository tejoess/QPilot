[{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\app\\builder\\[projectId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used.","line":20,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Separator"},"fix":{"range":[468,524],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setProjectError' is assigned a value but never used.","line":63,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":83,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":83,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":96,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":96,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":126,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":126,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":156,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":156,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * app/builder/[projectId]/page.tsx\r\n */\r\n\r\nimport { useEffect, useCallback, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { toast } from \"sonner\";\r\nimport {\r\n    ArrowRight,\r\n    ChevronRight,\r\n    Loader2,\r\n    Sparkles,\r\n} from \"lucide-react\";\r\n\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\n\r\nimport { SectionList } from \"@/components/builder/SectionList\";\r\nimport { MetadataForm } from \"@/components/builder/MetadataForm\";\r\nimport { GenerationSettings } from \"@/components/builder/GenerationSettings\";\r\nimport { SummaryCard } from \"@/components/builder/SummaryCard\";\r\n\r\nimport {\r\n    getProject,\r\n    getSections,\r\n    updateProject,\r\n    generatePaper,\r\n} from \"@/lib/projectApi\";\r\nimport {\r\n    useProjectStore,\r\n} from \"@/store/projectStore\";\r\n\r\nimport type { UpdateProjectPayload, Project } from \"@/types/api\";\r\n\r\nconst STATUS_VARIANT: Record<string, string> = {\r\n    draft: \"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300\",\r\n    processing: \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300\",\r\n    done: \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300\",\r\n    error: \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300\",\r\n};\r\n\r\nexport default function BuilderPage() {\r\n    const params = useParams<{ projectId: string }>();\r\n    const router = useRouter();\r\n    const projectId = params?.projectId ?? \"\";\r\n\r\n    // ── Zustand ───────────────────────────────────────────────────────────────\r\n    const {\r\n        project,\r\n        sections,\r\n        isLoadingProject,\r\n        isLoadingSections,\r\n        isSavingProject,\r\n        setProject,\r\n        setSections,\r\n        setLoadingProject,\r\n        setLoadingSections,\r\n        setSavingProject,\r\n        setProjectError,\r\n        resetBuilder,\r\n        updateProjectLocal,\r\n        isValid\r\n    } = useProjectStore();\r\n\r\n    const totalMarks = sections.reduce((s, sec) => s + sec.totalMarks, 0); // Moved here to be in scope\r\n\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n    useEffect(() => {\r\n        return () => resetBuilder();\r\n    }, [resetBuilder]);\r\n\r\n    const fetchProject = useCallback(async () => {\r\n        if (!projectId) return;\r\n        setLoadingProject(true);\r\n        try {\r\n            const data = await getProject(projectId);\r\n            setProject(data);\r\n        } catch (err) {\r\n            toast.error(\"Could not load project.\");\r\n        } finally {\r\n            setLoadingProject(false);\r\n        }\r\n    }, [projectId, setProject, setLoadingProject]);\r\n\r\n    const fetchSections = useCallback(async () => {\r\n        if (!projectId) return;\r\n        setLoadingSections(true);\r\n        try {\r\n            const data = await getSections(projectId);\r\n            setSections(data);\r\n        } catch (err) {\r\n            toast.error(\"Could not load sections.\");\r\n        } finally {\r\n            setLoadingSections(false);\r\n        }\r\n    }, [projectId, setSections, setLoadingSections]);\r\n\r\n    useEffect(() => {\r\n        fetchProject();\r\n        fetchSections();\r\n    }, [fetchProject, fetchSections]);\r\n\r\n    const handleMetadataChange = (updates: Partial<Project>) => {\r\n        updateProjectLocal(updates);\r\n    };\r\n\r\n    const handleSettingsChange = (updates: Partial<Project[\"settings\"]>) => {\r\n        if (!project) return;\r\n        updateProjectLocal({\r\n            settings: { ...project.settings, ...updates }\r\n        });\r\n    };\r\n\r\n    const handleSaveAll = async () => {\r\n        if (!project) return;\r\n        setSavingProject(true);\r\n        try {\r\n            const saved = await updateProject(project.id, project as UpdateProjectPayload);\r\n            setProject(saved);\r\n            toast.success(\"Project updated.\");\r\n        } catch (err) {\r\n            toast.error(\"Failed to save.\");\r\n        } finally {\r\n            setSavingProject(false);\r\n        }\r\n    };\r\n\r\n    const handleGenerate = async () => {\r\n        if (!project) return;\r\n        if (!isValid()) {\r\n            toast.error(\"Validation failed.\", {\r\n                description: \"Total section marks must equal total paper marks.\"\r\n            });\r\n            return;\r\n        }\r\n\r\n        setIsGenerating(true);\r\n        try {\r\n            const result = await generatePaper({\r\n                subject: project.subject,\r\n                grade: project.grade,\r\n                board: project.board,\r\n            });\r\n\r\n            if (result.status === \"success\") {\r\n                toast.success(\"Generation started!\");\r\n                router.push(`/processing/${project.id}`);\r\n            } else {\r\n                toast.error(\"Failed to start generation.\");\r\n            }\r\n        } catch (err) {\r\n            toast.error(\"Backend error. Is the server running?\");\r\n        } finally {\r\n            setIsGenerating(false);\r\n        }\r\n    };\r\n\r\n    const pageIsValid = isValid();\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background/50 flex flex-col\">\r\n            {/* ══ Topbar ═══════════════════════════════════════════════════════════ */}\r\n            <header className=\"sticky top-0 z-30 border-b bg-background/80 backdrop-blur-md\">\r\n                <div className=\"mx-auto max-w-[1400px] px-4 h-14 flex items-center justify-between\">\r\n                    <nav aria-label=\"Breadcrumb\" className=\"flex items-center gap-1.5 text-sm text-muted-foreground mr-4 min-w-0\">\r\n                        <button onClick={() => router.push(\"/\")} className=\"hover:text-foreground transition-colors truncate\">Projects</button>\r\n                        <ChevronRight className=\"h-3.5 w-3.5 flex-shrink-0\" />\r\n                        {isLoadingProject ? <Skeleton className=\"h-4 w-24\" /> : <span className=\"text-foreground font-medium truncate\">{project?.name}</span>}\r\n                        <ChevronRight className=\"h-3.5 w-3.5 flex-shrink-0\" />\r\n                        <span className=\"text-primary font-bold\">Builder</span>\r\n\r\n                        {!isLoadingProject && project && (\r\n                            <>\r\n                                <Badge variant=\"secondary\" className={`ml-3 hidden sm:inline-flex text-[10px] capitalize ${STATUS_VARIANT[project.status]}`}>\r\n                                    {project.status}\r\n                                </Badge>\r\n                                <Badge\r\n                                    variant=\"outline\"\r\n                                    className=\"ml-2 flex-shrink-0 text-xs tabular-nums\"\r\n                                    aria-label={`${totalMarks} marks`}\r\n                                >\r\n                                    {totalMarks}m\r\n                                </Badge>\r\n                            </>\r\n                        )}\r\n                    </nav>\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <Button\r\n                            size=\"sm\"\r\n                            onClick={handleGenerate}\r\n                            disabled={isLoadingProject || isLoadingSections || isGenerating || !pageIsValid}\r\n                            className=\"gap-2 shadow-sm font-semibold\"\r\n                        >\r\n                            {isGenerating ? <Loader2 className=\"h-3.5 w-3.5 animate-spin\" /> : <Sparkles className=\"h-3.5 w-3.5\" />}\r\n                            Generate Paper\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            {/* ══ Main View ═════════════════════════════════════════════════════════ */}\r\n            <main className=\"flex-1 mx-auto w-full max-w-[1400px] p-4 lg:p-6\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6 items-start\">\r\n\r\n                    {/* ── LEFT: FORM & LIST ────────────────────────────────────────── */}\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            <MetadataForm\r\n                                data={project ? {\r\n                                    name: project.name,\r\n                                    subject: project.subject,\r\n                                    grade: project.grade,\r\n                                    board: project.board,\r\n                                    paperType: project.paperType,\r\n                                    totalMarks: project.totalMarks,\r\n                                    duration: project.duration,\r\n                                    instructions: project.instructions\r\n                                } : { name: \"\", subject: \"\", grade: \"\", board: \"\", paperType: \"cbse\", totalMarks: 100, duration: \"\", instructions: \"\" }}\r\n                                onChange={handleMetadataChange}\r\n                                onSave={handleSaveAll}\r\n                                isSaving={isSavingProject}\r\n                                isLoading={isLoadingProject}\r\n                            />\r\n                            <GenerationSettings\r\n                                settings={project?.settings || { includeAnswerKey: true, shuffleQuestions: false, negativeMarking: false, difficultyDistribution: [30, 40, 30] }}\r\n                                onChange={handleSettingsChange}\r\n                                isLoading={isLoadingProject}\r\n                            />\r\n                        </div>\r\n\r\n                        <SectionList\r\n                            projectId={projectId}\r\n                            sections={sections}\r\n                            isLoading={isLoadingSections}\r\n                        />\r\n\r\n                        <div className=\"flex border-t pt-6 justify-between items-center bg-card p-6 rounded-2xl border border-border/60 shadow-sm\">\r\n                            <div className=\"space-y-1\">\r\n                                <p className=\"text-sm font-medium text-muted-foreground\">Ready to generate?</p>\r\n                                <p className=\"text-xs text-muted-foreground\">Ensure all sections are correctly configured and marks match.</p>\r\n                            </div>\r\n                            <Button\r\n                                size=\"lg\"\r\n                                onClick={handleGenerate}\r\n                                disabled={!pageIsValid || isGenerating}\r\n                                className=\"gap-2 px-8 h-12 text-base font-bold\"\r\n                            >\r\n                                {isGenerating ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <ArrowRight className=\"h-5 w-5\" />}\r\n                                Generate Question Paper\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* ── RIGHT: SUMMARY ────────────────────────────────────────────── */}\r\n                    <aside className=\"sticky top-20\">\r\n                        <SummaryCard\r\n                            project={project}\r\n                            sections={sections}\r\n                            isLoading={isLoadingProject || isLoadingSections}\r\n                        />\r\n                    </aside>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\app\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\app\\processing\\[projectId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useProjectStore' is defined but never used.","line":34,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":25,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"useProjectStore"},"fix":{"range":[1167,1224],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":56,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * app/processing/[projectId]/page.tsx\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Processing Page — orchestrates the multi-agent question paper generation.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport {\r\n    Loader2,\r\n    AlertTriangle,\r\n    CheckCircle,\r\n    ArrowRight,\r\n    RefreshCcw,\r\n    FileText,\r\n    Rocket\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Alert, AlertTitle, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\nimport { PipelineSteps } from \"@/components/processing/PipelineSteps\";\r\nimport { LogPanel } from \"@/components/processing/LogPanel\";\r\nimport { ProcessingProgress } from \"@/components/processing/ProcessingProgress\";\r\n\r\nimport { useProcessing } from \"@/hooks/useProcessing\";\r\nimport { useProcessingStore } from \"@/store/processingStore\";\r\nimport { useProjectStore } from \"@/store/projectStore\";\r\nimport { getProject } from \"@/lib/projectApi\";\r\nimport type { PaperGenerationRequest } from \"@/types/api\";\r\n\r\nexport default function ProcessingPage() {\r\n    const { projectId } = useParams<{ projectId: string }>();\r\n    const router = useRouter();\r\n\r\n    const { status, error, resultFilePath, reset } = useProcessingStore();\r\n    const [requestData, setRequestData] = useState<PaperGenerationRequest | null>(null);\r\n    const [isInitializing, setIsInitializing] = useState(true);\r\n\r\n    // Fetch project to get the metadata needed for POST /generate-paper\r\n    useEffect(() => {\r\n        async function load() {\r\n            try {\r\n                const project = await getProject(projectId as string);\r\n                setRequestData({\r\n                    subject: project.subject,\r\n                    grade: project.grade,\r\n                    board: project.board\r\n                });\r\n            } catch (err) {\r\n                toast.error(\"Could not load project metadata.\");\r\n            } finally {\r\n                setIsInitializing(false);\r\n            }\r\n        }\r\n        load();\r\n    }, [projectId]);\r\n\r\n    const { runGeneration } = useProcessing(projectId as string, requestData);\r\n\r\n    // Auto-start generation once project data is ready\r\n    useEffect(() => {\r\n        if (requestData && status === \"idle\") {\r\n            runGeneration();\r\n        }\r\n    }, [requestData, status, runGeneration]);\r\n\r\n    // Success redirection\r\n    useEffect(() => {\r\n        if (status === \"completed\" && resultFilePath) {\r\n            const timer = setTimeout(() => {\r\n                router.push(`/output/${projectId}`);\r\n            }, 3000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [status, resultFilePath, router, projectId]);\r\n\r\n    // Clean up on unmount\r\n    useEffect(() => {\r\n        return () => reset();\r\n    }, [reset]);\r\n\r\n    if (isInitializing) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n                <div className=\"text-center space-y-4\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-primary\" />\r\n                    <p className=\"text-sm text-muted-foreground\">Initializing generation pipeline...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background/50 flex flex-col\">\r\n            <main className=\"flex-1 mx-auto w-full max-w-5xl p-4 lg:p-10 space-y-8\">\r\n\r\n                {/* ══ Status Hero ═══════════════════════════════════════════════ */}\r\n                <section className=\"text-center space-y-4 py-6\" aria-live=\"polite\">\r\n                    <div className=\"inline-flex h-20 w-20 items-center justify-center rounded-full bg-primary/5 border-2 border-primary/10\">\r\n                        {status === \"completed\" ? (\r\n                            <CheckCircle className=\"h-10 w-10 text-green-500\" />\r\n                        ) : status === \"failed\" ? (\r\n                            <AlertTriangle className=\"h-10 w-10 text-destructive\" />\r\n                        ) : (\r\n                            <Rocket className=\"h-10 w-10 text-primary animate-pulse\" />\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"space-y-1.5\">\r\n                        <h1 className=\"text-2xl font-bold tracking-tight text-foreground\">\r\n                            {status === \"completed\" ? \"Generation Complete!\" :\r\n                                status === \"failed\" ? \"Generation Failed\" :\r\n                                    \"Generating Question Paper\"}\r\n                        </h1>\r\n                        <p className=\"text-sm text-muted-foreground max-w-md mx-auto\">\r\n                            {status === \"completed\" ? \"Successfully constructed your paper. Redirecting to output...\" :\r\n                                status === \"failed\" ? \"An error occurred during the multi-agent pipeline.\" :\r\n                                    \"Our specialized agents are collaborating to build your question paper.\"}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-center gap-2\">\r\n                        <Badge variant=\"outline\" className=\"px-3 py-1\">\r\n                            Project ID: {projectId}\r\n                        </Badge>\r\n                        {status === \"generating\" && (\r\n                            <Badge className=\"bg-blue-500 hover:bg-blue-600 px-3 py-1\">\r\n                                Active Session\r\n                            </Badge>\r\n                        )}\r\n                    </div>\r\n                </section>\r\n\r\n                {/* ══ Error Alert ═══════════════════════════════════════════════ */}\r\n                {error && (\r\n                    <Alert variant=\"destructive\" className=\"max-w-2xl mx-auto shadow-lg animate-in fade-in slide-in-from-top-4\">\r\n                        <AlertTriangle className=\"h-4 w-4\" />\r\n                        <AlertTitle>Error Detail</AlertTitle>\r\n                        <AlertDescription className=\"flex items-center justify-between gap-4\">\r\n                            <span>{error}</span>\r\n                            <Button size=\"sm\" variant=\"outline\" className=\"bg-background\" onClick={() => runGeneration()}>\r\n                                <RefreshCcw className=\"h-3.5 w-3.5 mr-2\" />\r\n                                Retry\r\n                            </Button>\r\n                        </AlertDescription>\r\n                    </Alert>\r\n                )}\r\n\r\n                {/* ══ Middle Section: Steps & Progress ═════════════════════════ */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-8\">\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <h2 className=\"text-sm font-bold uppercase tracking-widest text-muted-foreground/70\">Pipeline Steps</h2>\r\n                        </div>\r\n                        <PipelineSteps />\r\n                    </div>\r\n\r\n                    <aside className=\"space-y-6\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <h2 className=\"text-sm font-bold uppercase tracking-widest text-muted-foreground/70\">Status Panel</h2>\r\n                        </div>\r\n                        <ProcessingProgress />\r\n                        <LogPanel />\r\n                    </aside>\r\n                </div>\r\n\r\n                {/* ══ Footer Actions ════════════════════════════════════════════ */}\r\n                <Separator className=\"opacity-50\" />\r\n\r\n                <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4 py-4\">\r\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                            <div className=\"h-2 w-2 rounded-full bg-emerald-500 animate-pulse\" />\r\n                            Agent Connection: High\r\n                        </div>\r\n                        <Separator orientation=\"vertical\" className=\"h-4\" />\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                            <FileText className=\"h-3.5 w-3.5\" />\r\n                            Target: PDF Export\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                        {status === \"completed\" && (\r\n                            <Button onClick={() => router.push(`/output/${projectId}`)}>\r\n                                View Result\r\n                                <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n                            </Button>\r\n                        )}\r\n                        <Button variant=\"ghost\" onClick={() => router.push(`/builder/${projectId}`)}>\r\n                            Back to Builder\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\app\\qpilot\\[projectId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":42,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'runGeneration' is assigned a value but never used.","line":53,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * app/qpilot/[projectId]/page.tsx\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * QPilot Agent Execution Interface.\r\n * AI control center focused on monitoring agent workflows and live paper rendering.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { SidebarProvider, SidebarInset } from \"@/components/ui/sidebar\";\r\nimport { QPilotSidebar } from \"@/components/qpilot/QPilotSidebar\";\r\nimport { AgentPanel } from \"@/components/qpilot/AgentPanel\";\r\nimport { AgentChatPanel } from \"@/components/qpilot/AgentChatPanel\";\r\nimport { useQPilotStore } from \"@/store/qpilotStore\";\r\nimport { useQPilotInterface } from \"@/hooks/useQPilotInterface\";\r\nimport { getProject } from \"@/lib/projectApi\";\r\nimport { toast } from \"sonner\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport type { PaperGenerationRequest } from \"@/types/api\";\r\n\r\nexport default function QPilotExecutionPage() {\r\n    const { projectId } = useParams<{ projectId: string }>();\r\n    const router = useRouter();\r\n\r\n    const { status, reset } = useQPilotStore();\r\n    const [requestData, setRequestData] = useState<PaperGenerationRequest | null>(null);\r\n    const [isInitializing, setIsInitializing] = useState(true);\r\n\r\n    // 1. Initial Data Fetch\r\n    useEffect(() => {\r\n        async function init() {\r\n            try {\r\n                const project = await getProject(projectId as string);\r\n                setRequestData({\r\n                    subject: project.subject,\r\n                    grade: project.grade,\r\n                    board: project.board\r\n                });\r\n            } catch (err) {\r\n                toast.error(\"Failed to initialize project session.\");\r\n            } finally {\r\n                setIsInitializing(false);\r\n            }\r\n        }\r\n        init();\r\n        return () => reset(); // Cleanup on unmount\r\n    }, [projectId, reset]);\r\n\r\n    // 2. Integration Hook\r\n    const { runGeneration } = useQPilotInterface(projectId as string, requestData);\r\n\r\n    // 3. Manual initialization is now handled by event-driven orchestrator\r\n    // in the individual agent cards.\r\n\r\n    // Handle completion delay & redirect\r\n    useEffect(() => {\r\n        if (status === \"completed\") {\r\n            toast.success(\"Generation Complete!\", {\r\n                description: \"Reviewing final document... Redirecting in 3s.\",\r\n            });\r\n            const timer = setTimeout(() => {\r\n                router.push(`/output/${projectId}`);\r\n            }, 3500);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [status, projectId, router]);\r\n\r\n    if (isInitializing) {\r\n        return (\r\n            <div className=\"h-screen w-full flex flex-col items-center justify-center bg-background\">\r\n                <Loader2 className=\"h-6 w-6 animate-spin text-primary mb-2\" />\r\n                <span className=\"text-xs font-bold uppercase tracking-widest text-muted-foreground\">Booting Agents...</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <SidebarProvider style={{\r\n            \"--sidebar-width\": \"240px\",\r\n            \"--sidebar-width-icon\": \"70px\"\r\n        } as React.CSSProperties}>\r\n            <div className=\"flex h-screen w-full overflow-hidden bg-background\">\r\n                {/* 1. SIDEBAR */}\r\n                <QPilotSidebar />\r\n\r\n                <SidebarInset className=\"flex-1 overflow-hidden\">\r\n                    <div className=\"flex h-full overflow-hidden\">\r\n\r\n                        {/* 2. LEFT PANEL (Agents Area) - ~400px fixed width */}\r\n                        <div className=\"w-[400px] border-r border-border/50 bg-card/10 overflow-hidden flex flex-col\">\r\n                            <div className=\"px-6 py-4 border-b border-border/50 bg-background/50\">\r\n                                <h2 className=\"text-sm font-bold uppercase tracking-[0.2em] text-primary\">Multi-Agent Orchestration</h2>\r\n                                <p className=\"text-[10px] text-muted-foreground uppercase font-medium\">Real-time pipeline monitoring</p>\r\n                            </div>\r\n                            <div className=\"flex-1 overflow-hidden\">\r\n                                <AgentPanel />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 3. RIGHT PANEL (Orchestrator Chat) - Fills remaining space */}\r\n                        <main className=\"flex-1 overflow-hidden bg-muted/20\">\r\n                            <AgentChatPanel />\r\n                        </main>\r\n                    </div>\r\n                </SidebarInset>\r\n            </div>\r\n        </SidebarProvider>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\app\\qpilot\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\app\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ThemePreviewCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\builder\\GenerationSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\builder\\LivePreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\builder\\MetadataForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\builder\\SectionDialog.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\builder\\SectionDialog.tsx:76:13\n  74 |     useEffect(() => {\n  75 |         if (open) {\n> 76 |             setForm({\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  77 |                 name: initial?.name ?? \"\",\n  78 |                 type: initial?.type ?? \"mcq\",\n  79 |                 numQuestions: initial?.numQuestions ?? 10,","line":76,"column":13,"nodeType":null,"endLine":76,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/builder/SectionDialog.tsx\r\n */\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogDescription,\r\n    DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport type { CreateSectionPayload, SectionType, DifficultyLevel } from \"@/types/api\";\r\n\r\nconst SECTION_TYPES: { value: SectionType; label: string }[] = [\r\n    { value: \"mcq\", label: \"Multiple Choice (MCQ)\" },\r\n    { value: \"short_answer\", label: \"Short Answer\" },\r\n    { value: \"long_answer\", label: \"Long Answer\" },\r\n    { value: \"fill_in_the_blank\", label: \"Fill in the Blank\" },\r\n    { value: \"true_false\", label: \"True / False\" },\r\n];\r\n\r\nconst DIFFICULTY_LEVELS: { value: DifficultyLevel; label: string }[] = [\r\n    { value: \"easy\", label: \"Easy\" },\r\n    { value: \"medium\", label: \"Medium\" },\r\n    { value: \"hard\", label: \"Hard\" },\r\n];\r\n\r\ninterface SectionDialogProps {\r\n    mode: \"add\" | \"edit\";\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    initial?: Partial<CreateSectionPayload>;\r\n    onSubmit: (payload: CreateSectionPayload) => void;\r\n    isSubmitting?: boolean;\r\n    nextOrder?: number;\r\n}\r\n\r\nconst DEFAULT_FORM: CreateSectionPayload = {\r\n    name: \"\",\r\n    type: \"mcq\",\r\n    numQuestions: 10,\r\n    marksPerQuestion: 1,\r\n    difficulty: \"medium\",\r\n    order: 1,\r\n};\r\n\r\nexport function SectionDialog({\r\n    mode,\r\n    open,\r\n    onOpenChange,\r\n    initial,\r\n    onSubmit,\r\n    isSubmitting = false,\r\n    nextOrder = 1,\r\n}: SectionDialogProps) {\r\n    const [form, setForm] = useState<CreateSectionPayload>({ ...DEFAULT_FORM });\r\n    const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n    useEffect(() => {\r\n        if (open) {\r\n            setForm({\r\n                name: initial?.name ?? \"\",\r\n                type: initial?.type ?? \"mcq\",\r\n                numQuestions: initial?.numQuestions ?? 10,\r\n                marksPerQuestion: initial?.marksPerQuestion ?? 1,\r\n                difficulty: initial?.difficulty ?? \"medium\",\r\n                order: initial?.order ?? nextOrder,\r\n            });\r\n            setErrors({});\r\n        }\r\n    }, [open, initial, nextOrder]);\r\n\r\n    function validate(): boolean {\r\n        const errs: Record<string, string> = {};\r\n        if (!form.name.trim()) errs.name = \"Section name is required.\";\r\n        if (form.numQuestions < 1) errs.numQuestions = \"Must have at least 1 question.\";\r\n        if (form.marksPerQuestion < 1) errs.marksPerQuestion = \"Marks must be at least 1.\";\r\n        setErrors(errs);\r\n        return Object.keys(errs).length === 0;\r\n    }\r\n\r\n    function handleSubmit(e: React.FormEvent) {\r\n        e.preventDefault();\r\n        if (!validate()) return;\r\n        onSubmit({ ...form });\r\n    }\r\n\r\n    function setField<K extends keyof CreateSectionPayload>(\r\n        key: K,\r\n        value: CreateSectionPayload[K]\r\n    ) {\r\n        setForm((prev) => ({ ...prev, [key]: value }));\r\n        setErrors((prev) => ({ ...prev, [key]: \"\" }));\r\n    }\r\n\r\n    const title = mode === \"add\" ? \"Add Section\" : \"Edit Section\";\r\n    const submitLabel = mode === \"add\" ? \"Add Section\" : \"Save Changes\";\r\n    const computedTotal = form.numQuestions * form.marksPerQuestion;\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle>{title}</DialogTitle>\r\n                    <DialogDescription>\r\n                        Configure the questions and marks for this section.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4 py-2\">\r\n                    <div className=\"space-y-1.5\">\r\n                        <Label htmlFor=\"section-name\">Section Title</Label>\r\n                        <Input\r\n                            id=\"section-name\"\r\n                            placeholder=\"e.g. Section A\"\r\n                            value={form.name}\r\n                            onChange={(e) => setField(\"name\", e.target.value)}\r\n                            className={errors.name ? \"border-destructive\" : \"\"}\r\n                        />\r\n                        {errors.name && <p className=\"text-xs text-destructive\">{errors.name}</p>}\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-1.5\">\r\n                            <Label htmlFor=\"section-type\">Question Type</Label>\r\n                            <Select\r\n                                value={form.type}\r\n                                onValueChange={(v) => setField(\"type\", v as SectionType)}\r\n                            >\r\n                                <SelectTrigger id=\"section-type\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {SECTION_TYPES.map((t) => (\r\n                                        <SelectItem key={t.value} value={t.value}>{t.label}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"space-y-1.5\">\r\n                            <Label htmlFor=\"section-difficulty\">Difficulty</Label>\r\n                            <Select\r\n                                value={form.difficulty}\r\n                                onValueChange={(v) => setField(\"difficulty\", v as DifficultyLevel)}\r\n                            >\r\n                                <SelectTrigger id=\"section-difficulty\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {DIFFICULTY_LEVELS.map((t) => (\r\n                                        <SelectItem key={t.value} value={t.value}>{t.label}</SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-1.5\">\r\n                            <Label htmlFor=\"num-q\">No. of Questions</Label>\r\n                            <Input\r\n                                id=\"num-q\"\r\n                                type=\"number\"\r\n                                min={1}\r\n                                value={form.numQuestions}\r\n                                onChange={(e) => setField(\"numQuestions\", parseInt(e.target.value) || 0)}\r\n                            />\r\n                            {errors.numQuestions && <p className=\"text-xs text-destructive\">{errors.numQuestions}</p>}\r\n                        </div>\r\n                        <div className=\"space-y-1.5\">\r\n                            <Label htmlFor=\"marks-per\">Marks per Q</Label>\r\n                            <Input\r\n                                id=\"marks-per\"\r\n                                type=\"number\"\r\n                                min={1}\r\n                                value={form.marksPerQuestion}\r\n                                onChange={(e) => setField(\"marksPerQuestion\", parseInt(e.target.value) || 0)}\r\n                            />\r\n                            {errors.marksPerQuestion && <p className=\"text-xs text-destructive\">{errors.marksPerQuestion}</p>}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-3 bg-muted rounded-lg flex justify-between items-center\">\r\n                        <span className=\"text-sm font-medium text-muted-foreground\">Total Section Marks</span>\r\n                        <span className=\"text-lg font-bold text-foreground\">{computedTotal}</span>\r\n                    </div>\r\n\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isSubmitting}>\r\n                            Cancel\r\n                        </Button>\r\n                        <Button type=\"submit\" disabled={isSubmitting}>\r\n                            {isSubmitting ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : submitLabel}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\builder\\SectionList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":82,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":82,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":106,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":106,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":124,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/builder/SectionList.tsx\r\n */\r\n\r\nimport { useState } from \"react\";\r\nimport { Pencil, Trash2, GripVertical, Plus, Layers } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/components/ui/card\";\r\n\r\nimport { SectionDialog } from \"@/components/builder/SectionDialog\";\r\nimport {\r\n    addSection,\r\n    updateSection,\r\n    deleteSection,\r\n} from \"@/lib/projectApi\";\r\nimport { useProjectStore } from \"@/store/projectStore\";\r\nimport type { Section, CreateSectionPayload } from \"@/types/api\";\r\n\r\nconst TYPE_LABELS: Record<string, string> = {\r\n    mcq: \"MCQ\",\r\n    short_answer: \"Short\",\r\n    long_answer: \"Long\",\r\n    fill_in_the_blank: \"Fill Blank\",\r\n    true_false: \"T/F\",\r\n};\r\n\r\nconst DIFFICULTY_COLORS: Record<string, string> = {\r\n    easy: \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300\",\r\n    medium: \"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300\",\r\n    hard: \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300\",\r\n};\r\n\r\ninterface SectionListProps {\r\n    projectId: string;\r\n    sections: Section[];\r\n    isLoading: boolean;\r\n}\r\n\r\nexport function SectionList({ projectId, sections, isLoading }: SectionListProps) {\r\n    const { addSectionLocal, updateSectionLocal, removeSectionLocal } = useProjectStore();\r\n\r\n    const [addOpen, setAddOpen] = useState(false);\r\n    const [editTarget, setEditTarget] = useState<Section | null>(null);\r\n    const [deleteTarget, setDeleteTarget] = useState<Section | null>(null);\r\n    const [isMutating, setIsMutating] = useState(false);\r\n\r\n    async function handleAdd(payload: CreateSectionPayload) {\r\n        setIsMutating(true);\r\n        const tempId = `temp-${Date.now()}`;\r\n        const optimistic: Section = {\r\n            id: tempId,\r\n            projectId,\r\n            ...payload,\r\n            totalMarks: payload.numQuestions * payload.marksPerQuestion,\r\n            order: sections.length + 1,\r\n        };\r\n        addSectionLocal(optimistic);\r\n        setAddOpen(false);\r\n\r\n        try {\r\n            const saved = await addSection(projectId, payload);\r\n            removeSectionLocal(tempId);\r\n            addSectionLocal(saved);\r\n            toast.success(\"Section added.\");\r\n        } catch (err) {\r\n            removeSectionLocal(tempId);\r\n            toast.error(\"Failed to add section.\");\r\n        } finally {\r\n            setIsMutating(false);\r\n        }\r\n    }\r\n\r\n    async function handleEdit(payload: CreateSectionPayload) {\r\n        if (!editTarget) return;\r\n        setIsMutating(true);\r\n\r\n        const optimistic: Section = {\r\n            ...editTarget,\r\n            ...payload,\r\n            totalMarks: payload.numQuestions * payload.marksPerQuestion\r\n        };\r\n        updateSectionLocal(optimistic);\r\n        setEditTarget(null);\r\n\r\n        try {\r\n            const saved = await updateSection(projectId, editTarget.id, payload);\r\n            updateSectionLocal(saved);\r\n            toast.success(\"Section updated.\");\r\n        } catch (err) {\r\n            updateSectionLocal(editTarget);\r\n            toast.error(\"Failed to update section.\");\r\n        } finally {\r\n            setIsMutating(false);\r\n        }\r\n    }\r\n\r\n    async function handleDelete() {\r\n        if (!deleteTarget) return;\r\n        setIsMutating(true);\r\n        const snapshot = [...sections];\r\n        removeSectionLocal(deleteTarget.id);\r\n        setDeleteTarget(null);\r\n\r\n        try {\r\n            await deleteSection(projectId, deleteTarget.id);\r\n            toast.success(\"Section deleted.\");\r\n        } catch (err) {\r\n            snapshot.forEach((s) => addSectionLocal(s));\r\n            toast.error(\"Failed to delete section.\");\r\n        } finally {\r\n            setIsMutating(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card className=\"shadow-sm border-border/60\">\r\n            <CardHeader className=\"pb-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-1\">\r\n                        <CardTitle className=\"text-base font-semibold flex items-center gap-2\">\r\n                            <Layers className=\"h-4 w-4 text-muted-foreground\" />\r\n                            Question Sections\r\n                        </CardTitle>\r\n                        <CardDescription>Organize your paper into sections.</CardDescription>\r\n                    </div>\r\n                    <Button\r\n                        size=\"sm\"\r\n                        variant=\"outline\"\r\n                        onClick={() => setAddOpen(true)}\r\n                        disabled={isLoading || isMutating}\r\n                        className=\"gap-1.5\"\r\n                    >\r\n                        <Plus className=\"h-3.5 w-3.5\" />\r\n                        Add Section\r\n                    </Button>\r\n                </div>\r\n            </CardHeader>\r\n\r\n            <CardContent>\r\n                <div className=\"flex flex-col gap-3\">\r\n                    {isLoading ? (\r\n                        <div className=\"space-y-2\">\r\n                            {[1, 2, 3].map((i) => (\r\n                                <Skeleton key={i} className=\"h-14 w-full rounded-xl\" />\r\n                            ))}\r\n                        </div>\r\n                    ) : sections.length === 0 ? (\r\n                        <div className=\"flex flex-col items-center justify-center gap-3 py-10 text-center border-2 border-dashed rounded-xl\">\r\n                            <p className=\"text-sm text-muted-foreground\">No sections yet. Click &quot;Add Section&quot; to begin.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <ScrollArea className=\"max-h-[400px] pr-4\">\r\n                            <div className=\"space-y-2\">\r\n                                {sections.map((section) => (\r\n                                    <div\r\n                                        key={section.id}\r\n                                        className=\"group flex items-center gap-3 rounded-xl border border-border/50 bg-card p-3 transition-all hover:border-primary/30\"\r\n                                    >\r\n                                        <GripVertical className=\"h-4 w-4 text-muted-foreground/30 group-hover:text-muted-foreground/60 cursor-grab\" />\r\n\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <span className=\"text-sm font-semibold truncate\">{section.name}</span>\r\n                                                <Badge variant=\"outline\" className=\"text-[10px] h-4 px-1\">{TYPE_LABELS[section.type]}</Badge>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-2 mt-1\">\r\n                                                <span className=\"text-xs text-muted-foreground\">\r\n                                                    {section.numQuestions} Qs × {section.marksPerQuestion}m\r\n                                                </span>\r\n                                                <span className={`text-[10px] px-1.5 py-0.5 rounded-full font-medium ${DIFFICULTY_COLORS[section.difficulty]}`}>\r\n                                                    {section.difficulty}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"text-right\">\r\n                                                <p className=\"text-sm font-bold text-foreground\">{section.totalMarks}m</p>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-1\">\r\n                                                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\" onClick={() => setEditTarget(section)}>\r\n                                                    <Pencil className=\"h-3.5 w-3.5\" />\r\n                                                </Button>\r\n                                                <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-destructive\" onClick={() => setDeleteTarget(section)}>\r\n                                                    <Trash2 className=\"h-3.5 w-3.5\" />\r\n                                                </Button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </ScrollArea>\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n\r\n            <SectionDialog\r\n                mode=\"add\"\r\n                open={addOpen}\r\n                onOpenChange={setAddOpen}\r\n                onSubmit={handleAdd}\r\n                isSubmitting={isMutating}\r\n                nextOrder={sections.length + 1}\r\n            />\r\n\r\n            <SectionDialog\r\n                mode=\"edit\"\r\n                open={!!editTarget}\r\n                onOpenChange={(o) => !o && setEditTarget(null)}\r\n                initial={editTarget ?? undefined}\r\n                onSubmit={handleEdit}\r\n                isSubmitting={isMutating}\r\n            />\r\n\r\n            <AlertDialog open={!!deleteTarget} onOpenChange={(o) => !o && setDeleteTarget(null)}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Delete Section?</AlertDialogTitle>\r\n                        <AlertDialogDescription>Permanently remove &quot;{deleteTarget?.name}&quot;.</AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction className=\"bg-destructive\" onClick={handleDelete}>Delete</AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\builder\\SummaryCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Badge"},"fix":{"range":[179,227],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ResponsiveContainer' is defined but never used.","line":17,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":50,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ResponsiveContainer"},"fix":{"range":[496,517],"text":""},"desc":"Remove unused variable \"ResponsiveContainer\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/builder/SummaryCard.tsx\r\n */\r\n\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n    ChartContainer,\r\n    ChartTooltip,\r\n    ChartTooltipContent,\r\n    type ChartConfig\r\n} from \"@/components/ui/chart\";\r\nimport { Pie, PieChart, Cell, ResponsiveContainer } from \"recharts\";\r\nimport {\r\n    TrendingUp,\r\n    FileCheck,\r\n    BarChart3,\r\n    Target,\r\n    AlertCircle,\r\n    HelpCircle\r\n} from \"lucide-react\";\r\nimport type { Section, Project } from \"@/types/api\";\r\n\r\ninterface SummaryCardProps {\r\n    project: Project | null;\r\n    sections: Section[];\r\n    isLoading: boolean;\r\n}\r\n\r\nconst COLORS = [\"#2563eb\", \"#10b981\", \"#8b5cf6\", \"#f59e0b\", \"#ef4444\"];\r\n\r\nexport function SummaryCard({ project, sections, isLoading }: SummaryCardProps) {\r\n    if (isLoading || !project) {\r\n        return (\r\n            <Card className=\"h-full shadow-sm border-border/60\">\r\n                <CardContent className=\"pt-6 space-y-4\">\r\n                    <div className=\"h-32 w-full bg-muted animate-pulse rounded-xl\" />\r\n                    <div className=\"h-4 w-full bg-muted animate-pulse rounded\" />\r\n                    <div className=\"h-4 w-2/3 bg-muted animate-pulse rounded\" />\r\n                </CardContent>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    const totalSectionMarks = sections.reduce((sum, s) => sum + s.totalMarks, 0);\r\n    const totalQuestions = sections.reduce((sum, s) => sum + s.numQuestions, 0);\r\n    const markCompletion = Math.min(100, (totalSectionMarks / project.totalMarks) * 100);\r\n    const isMarksValid = totalSectionMarks === project.totalMarks;\r\n\r\n    // Prepare data for distribution chart\r\n    const chartData = sections.map((s, i) => ({\r\n        name: s.name,\r\n        value: s.totalMarks,\r\n        fill: COLORS[i % COLORS.length]\r\n    }));\r\n\r\n    const chartConfig = {\r\n        value: { label: \"Marks\" },\r\n        ...Object.fromEntries(sections.map((s, i) => [s.name, { label: s.name, color: COLORS[i % COLORS.length] }]))\r\n    } satisfies ChartConfig;\r\n\r\n    // Difficulty breakdown\r\n    const difficultyCount = {\r\n        easy: sections.filter(s => s.difficulty === \"easy\").reduce((sum, s) => sum + s.totalMarks, 0),\r\n        medium: sections.filter(s => s.difficulty === \"medium\").reduce((sum, s) => sum + s.totalMarks, 0),\r\n        hard: sections.filter(s => s.difficulty === \"hard\").reduce((sum, s) => sum + s.totalMarks, 0),\r\n    };\r\n\r\n    return (\r\n        <Card className=\"h-full shadow-sm border-border/60 flex flex-col bg-card/50\">\r\n            <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-sm font-semibold flex items-center gap-2\">\r\n                    <BarChart3 className=\"h-4 w-4 text-primary\" />\r\n                    Live Paper Summary\r\n                </CardTitle>\r\n                <CardDescription className=\"text-xs\">Dynamic analysis of your paper structure.</CardDescription>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"flex-1 space-y-6 pt-4\">\r\n                {/* Status Check */}\r\n                <div className={`p-3 rounded-lg border flex items-start gap-3 ${isMarksValid ? \"bg-green-50 border-green-200 dark:bg-green-950/20 dark:border-green-800/30\" : \"bg-amber-50 border-amber-200 dark:bg-amber-950/20 dark:border-amber-800/30\"}`}>\r\n                    {isMarksValid ? (\r\n                        <FileCheck className=\"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5\" />\r\n                    ) : (\r\n                        <AlertCircle className=\"h-5 w-5 text-amber-600 dark:text-amber-400 mt-0.5\" />\r\n                    )}\r\n                    <div className=\"space-y-1\">\r\n                        <p className={`text-xs font-bold ${isMarksValid ? \"text-green-800 dark:text-green-300\" : \"text-amber-800 dark:text-amber-300\"}`}>\r\n                            {isMarksValid ? \"Validation Passed\" : \"Marks Mismatch\"}\r\n                        </p>\r\n                        <p className=\"text-[10px] text-muted-foreground leading-tight\">\r\n                            {isMarksValid\r\n                                ? \"Total section marks match the target.\"\r\n                                : `Target: ${project.totalMarks}, Current: ${totalSectionMarks}. Difference: ${project.totalMarks - totalSectionMarks}`}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Stats Grid */}\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div className=\"space-y-1 text-center p-3 rounded-xl bg-background border border-border/50\">\r\n                        <p className=\"text-[10px] uppercase tracking-wider text-muted-foreground font-semibold\">Total Marks</p>\r\n                        <p className=\"text-xl font-bold text-foreground\">{totalSectionMarks}<span className=\"text-xs text-muted-foreground font-normal\"> / {project.totalMarks}</span></p>\r\n                    </div>\r\n                    <div className=\"space-y-1 text-center p-3 rounded-xl bg-background border border-border/50\">\r\n                        <p className=\"text-[10px] uppercase tracking-wider text-muted-foreground font-semibold\">Total Qs</p>\r\n                        <p className=\"text-xl font-bold text-foreground\">{totalQuestions}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Mark Completion Progress */}\r\n                <div className=\"space-y-2\">\r\n                    <div className=\"flex justify-between text-[11px] font-medium\">\r\n                        <span className=\"text-muted-foreground\">Allocation Progress</span>\r\n                        <span className={isMarksValid ? \"text-green-600\" : \"text-primary\"}>{Math.round(markCompletion)}%</span>\r\n                    </div>\r\n                    <Progress value={markCompletion} className=\"h-1.5\" />\r\n                </div>\r\n\r\n                <Separator className=\"opacity-50\" />\r\n\r\n                {/* Marks Distribution Chart */}\r\n                <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <TrendingUp className=\"h-3.5 w-3.5 text-blue-500\" />\r\n                        <span className=\"text-xs font-semibold\">Marks Distribution</span>\r\n                    </div>\r\n\r\n                    <div className=\"h-[160px] w-full mt-2\">\r\n                        <ChartContainer config={chartConfig} className=\"mx-auto aspect-square h-full\">\r\n                            <PieChart>\r\n                                <ChartTooltip cursor={false} content={<ChartTooltipContent hideLabel />} />\r\n                                <Pie\r\n                                    data={chartData}\r\n                                    dataKey=\"value\"\r\n                                    nameKey=\"name\"\r\n                                    innerRadius={50}\r\n                                    outerRadius={70}\r\n                                    strokeWidth={5}\r\n                                >\r\n                                    {chartData.map((entry, index) => (\r\n                                        <Cell key={`cell-${index}`} fill={entry.fill} />\r\n                                    ))}\r\n                                </Pie>\r\n                            </PieChart>\r\n                        </ChartContainer>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Difficulty Breakdown */}\r\n                <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Target className=\"h-3.5 w-3.5 text-amber-500\" />\r\n                        <span className=\"text-xs font-semibold\">Difficulty Breakdown</span>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2.5 mt-2\">\r\n                        <div className=\"space-y-1\">\r\n                            <div className=\"flex justify-between text-[10px] uppercase tracking-tighter font-bold\">\r\n                                <span className=\"text-green-600\">Easy</span>\r\n                                <span>{difficultyCount.easy}m</span>\r\n                            </div>\r\n                            <Progress value={(difficultyCount.easy / totalSectionMarks) * 100 || 0} className=\"h-1 bg-muted\" />\r\n                        </div>\r\n                        <div className=\"space-y-1\">\r\n                            <div className=\"flex justify-between text-[10px] uppercase tracking-tighter font-bold\">\r\n                                <span className=\"text-amber-600\">Medium</span>\r\n                                <span>{difficultyCount.medium}m</span>\r\n                            </div>\r\n                            <Progress value={(difficultyCount.medium / totalSectionMarks) * 100 || 0} className=\"h-1 bg-muted\" />\r\n                        </div>\r\n                        <div className=\"space-y-1\">\r\n                            <div className=\"flex justify-between text-[10px] uppercase tracking-tighter font-bold\">\r\n                                <span className=\"text-red-600\">Hard</span>\r\n                                <span>{difficultyCount.hard}m</span>\r\n                            </div>\r\n                            <Progress value={(difficultyCount.hard / totalSectionMarks) * 100 || 0} className=\"h-1 bg-muted\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </CardContent>\r\n\r\n            <CardFooter className=\"pt-2 border-t bg-muted/20\">\r\n                <div className=\"flex items-center gap-2 text-[10px] text-muted-foreground w-full\">\r\n                    <HelpCircle className=\"h-3 w-3\" />\r\n                    <span>Generated from current active sections.</span>\r\n                </div>\r\n            </CardFooter>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\dashboard\\FloatingOrchestrator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\dashboard\\QuickActionCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\dashboard\\RecentPapersTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\dashboard\\SystemStatusPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Separator"},"fix":{"range":[118,174],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * components/dashboard/SystemStatusPanel.tsx\r\n */\r\n\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { SystemStats } from \"@/store/dashboardStore\";\r\nimport { TrendingUp, Clock, Activity, Database } from \"lucide-react\";\r\n\r\ninterface SystemStatusPanelProps {\r\n    stats: SystemStats | null;\r\n    isLoading: boolean;\r\n}\r\n\r\nexport function SystemStatusPanel({ stats, isLoading }: SystemStatusPanelProps) {\r\n    if (isLoading || !stats) {\r\n        return (\r\n            <Card className=\"border-border/50 shadow-sm\">\r\n                <CardContent className=\"p-6\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\r\n                        {[1, 2, 3, 4].map((i) => (\r\n                            <div key={i} className=\"space-y-3\">\r\n                                <Skeleton className=\"h-4 w-24\" />\r\n                                <Skeleton className=\"h-8 w-32\" />\r\n                                <Skeleton className=\"h-4 w-40\" />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    const metrics = [\r\n        {\r\n            label: \"Total Papers Generated\",\r\n            value: stats.totalPapers.toLocaleString(),\r\n            description: \"Across all subjects and grades\",\r\n            trend: stats.trends.totalPapers,\r\n            icon: Activity\r\n        },\r\n        {\r\n            label: \"Last Generation Time\",\r\n            value: stats.lastGenTime,\r\n            description: \"Time since last synthesis\",\r\n            icon: Clock\r\n        },\r\n        {\r\n            label: \"Average Generation Time\",\r\n            value: stats.avgGenTime,\r\n            description: \"Based on last 50 papers\",\r\n            icon: TrendingUp\r\n        },\r\n        {\r\n            label: \"PYQ Database Size\",\r\n            value: stats.pyqDbSize,\r\n            description: \"Verified unique questions\",\r\n            icon: Database\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <Card className=\"border-border/50 shadow-sm bg-card/50 overflow-hidden\">\r\n            <CardContent className=\"p-0\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-4 divide-y md:divide-y-0 md:divide-x divide-border/20\">\r\n                    {metrics.map((m, i) => (\r\n                        <div key={i} className=\"p-6 space-y-3 transition-colors hover:bg-muted/30\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <span className=\"text-[11px] font-black uppercase tracking-widest text-muted-foreground/70\">\r\n                                    {m.label}\r\n                                </span>\r\n                                <m.icon className=\"h-3.5 w-3.5 text-primary/40\" />\r\n                            </div>\r\n\r\n                            <div className=\"flex items-baseline gap-2\">\r\n                                <h4 className=\"text-3xl font-black tracking-tighter text-foreground\">\r\n                                    {m.value}\r\n                                </h4>\r\n                                {m.trend && (\r\n                                    <Badge className=\"bg-emerald-500/10 text-emerald-600 border-emerald-100/50 hover:bg-emerald-500/10 text-[10px] px-1.5 h-5 font-bold\">\r\n                                        {m.trend}\r\n                                    </Badge>\r\n                                )}\r\n                            </div>\r\n\r\n                            <p className=\"text-[11px] font-medium text-muted-foreground/60 leading-tight\">\r\n                                {m.description}\r\n                            </p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\processing\\LogPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\processing\\PipelineSteps.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\processing\\ProcessingProgress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\AgentChatPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChatMessage' is defined but never used.","line":11,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":42,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChatMessage"},"fix":{"range":[362,380],"text":""},"desc":"Remove unused variable \"ChatMessage\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ScrollArea' is defined but never used.","line":12,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":20,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"ScrollArea"},"fix":{"range":[412,471],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/qpilot/AgentChatPanel.tsx\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Real-time chat log for orchestrated agent communication.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useQPilotStore, type ChatMessage } from \"@/store/qpilotStore\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Bot, User, Loader2, Sparkles, BadgeCheck } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function AgentChatPanel() {\r\n    const { chatMessages, status } = useQPilotStore();\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Auto-scroll to bottom\r\n    useEffect(() => {\r\n        if (scrollRef.current) {\r\n            scrollRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n        }\r\n    }, [chatMessages]);\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-slate-50/30 dark:bg-slate-950/20\">\r\n            <div className=\"px-6 py-4 bg-background border-b border-border/50 flex items-center justify-between sticky top-0 z-10\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"p-2 rounded-lg bg-slate-900 border border-slate-800 text-slate-100 shadow-lg\">\r\n                        <Bot className=\"h-5 w-5\" />\r\n                    </div>\r\n                    <div>\r\n                        <h2 className=\"text-sm font-bold text-foreground leading-none mb-1\">Orchestrator Control Log</h2>\r\n                        <div className=\"flex flex-col gap-1\">\r\n                            <p className=\"text-[10px] text-muted-foreground uppercase font-medium tracking-wider\">Active Multi-Agent Stream</p>\r\n                            <div className=\"flex items-center gap-1.5\">\r\n                                {status === 'running' ? (\r\n                                    <>\r\n                                        <Sparkles className=\"h-2.5 w-2.5 animate-pulse text-amber-500\" />\r\n                                        <span className=\"text-[9px] text-primary/80 font-bold uppercase tracking-tight\">Agents are actively synthesizing content...</span>\r\n                                    </>\r\n                                ) : status === 'completed' ? (\r\n                                    <>\r\n                                        <BadgeCheck className=\"h-2.5 w-2.5 text-green-500\" />\r\n                                        <span className=\"text-[9px] text-green-600 font-bold uppercase tracking-tight\">Paper generation finalized.</span>\r\n                                    </>\r\n                                ) : (\r\n                                    <span className=\"text-[9px] text-muted-foreground/60 font-bold uppercase tracking-tight italic\">Waiting for pipeline start...</span>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20\">\r\n                    <div className=\"h-2 w-2 rounded-full bg-emerald-500 animate-pulse\" />\r\n                    <span className=\"text-[10px] font-bold text-emerald-600 uppercase tracking-tighter\">Live Monitor</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\r\n                <div className=\"max-w-4xl mx-auto space-y-6\">\r\n                    {chatMessages.map((msg) => (\r\n                        <div\r\n                            key={msg.id}\r\n                            className={cn(\r\n                                \"flex gap-4 animate-in fade-in slide-in-from-bottom-2 duration-300\",\r\n                                msg.role === \"teacher\" ? \"flex-row-reverse\" : \"flex-row\"\r\n                            )}\r\n                        >\r\n                            <div className={cn(\r\n                                \"h-9 w-9 rounded-xl flex items-center justify-center shrink-0 border shadow-sm\",\r\n                                msg.role === \"teacher\"\r\n                                    ? \"bg-primary text-primary-foreground border-primary/20\"\r\n                                    : msg.role === \"orchestrator\"\r\n                                        ? \"bg-slate-900 text-slate-100 border-slate-800\"\r\n                                        : \"bg-background text-indigo-600 border-border/60\"\r\n                            )}>\r\n                                {msg.role === \"teacher\" ? <User className=\"h-5 w-5\" /> : <Bot className=\"h-5 w-5\" />}\r\n                            </div>\r\n\r\n                            <div className={cn(\r\n                                \"max-w-[85%] space-y-1.5\",\r\n                                msg.role === \"teacher\" ? \"items-end\" : \"items-start\"\r\n                            )}>\r\n                                <div className=\"flex items-center gap-2 px-1\">\r\n                                    <span className=\"text-[10px] font-black uppercase text-muted-foreground/80 tracking-widest\">\r\n                                        {msg.sender}\r\n                                    </span>\r\n                                    <span className=\"text-[9px] text-muted-foreground/40 font-bold\">\r\n                                        {new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' })}\r\n                                    </span>\r\n                                </div>\r\n                                <div className={cn(\r\n                                    \"p-4 rounded-2xl text-xs leading-relaxed font-medium shadow-sm border transition-all hover:shadow-md\",\r\n                                    msg.role === \"teacher\"\r\n                                        ? \"bg-primary text-primary-foreground rounded-tr-none border-primary/20\"\r\n                                        : msg.role === \"orchestrator\"\r\n                                            ? \"bg-slate-900 text-slate-200 rounded-tl-none border-slate-800\"\r\n                                            : \"bg-card rounded-tl-none border-border/80 text-foreground\"\r\n                                )}>\r\n                                    {msg.content}\r\n                                    {msg.role === \"orchestrator\" && msg.content.includes(\"...\") && (\r\n                                        <Loader2 className=\"h-3 w-3 animate-spin inline-block ml-3 opacity-50\" />\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                    <div ref={scrollRef} className=\"h-4\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\AgentPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\AutoFillButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAgentStatus' is assigned a value but never used.","line":14,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'emitMessage' is assigned a value but never used.","line":14,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":86}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Sparkles, PlayCircle } from \"lucide-react\";\r\nimport { useQPilotStore } from \"@/store/qpilotStore\";\r\nimport { useSyllabusStore } from \"@/store/syllabusStore\";\r\nimport { usePyqStore } from \"@/store/pyqStore\";\r\nimport { useBloomStore } from \"@/store/bloomStore\";\r\nimport { usePatternStore } from \"@/store/patternStore\";\r\nimport { useGenerationStore } from \"@/store/generationStore\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function AutoFillButton() {\r\n    const { status, runAutoFillDemo, setAgentStatus, setActiveAgentIndex, emitMessage } = useQPilotStore();\r\n\r\n    // External Store Actions\r\n    const setSyllabusText = useSyllabusStore(s => s.setTextContent);\r\n    const setPyqText = usePyqStore(s => s.setTextContent);\r\n    const setPyqYear = usePyqStore(s => s.setYear);\r\n    const setPyqBoard = usePyqStore(s => s.setBoard);\r\n    const setBloomLevels = useBloomStore(s => s.setBloomLevels);\r\n    const setPatternSections = usePatternStore(s => s.setSections);\r\n    const setTargetMarks = usePatternStore(s => s.setTotalMarks);\r\n    const setTeacherInput = useGenerationStore(s => s.setTeacherInput);\r\n\r\n    // Resets\r\n    const resetSyllabus = useSyllabusStore(s => s.reset);\r\n    const resetPyq = usePyqStore(s => s.reset);\r\n    const resetBloom = useBloomStore(s => s.reset);\r\n    const resetPattern = usePatternStore(s => s.reset);\r\n    const resetGeneration = useGenerationStore(s => s.reset);\r\n\r\n    const handleDemo = () => {\r\n        if (status !== \"idle\") return;\r\n\r\n        // 1. Reset Stores and Trigger Orchestrator Logic\r\n        resetSyllabus();\r\n        resetPyq();\r\n        resetBloom();\r\n        resetPattern();\r\n        resetGeneration();\r\n        runAutoFillDemo();\r\n\r\n        const teacherMsg = \"Focus more on integration and avoid repeated PYQs. Add internal choices in Section C.\";\r\n\r\n        // 2. Populate Data Across Stores\r\n        setSyllabusText(\"Unit 1: Limits and Derivatives\\nUnit 2: Integration\\nUnit 3: Differential Equations\\nUnit 4: Applications of Integrals\");\r\n\r\n        setPyqText(\"Q1: Evaluate ∫x^2 dx\\nQ2: Define limit.\\nQ3: Solve dy/dx = x^2\\nQ4: State Mean Value Theorem\");\r\n        setPyqYear(\"2024\");\r\n        setPyqBoard(\"CBSE\");\r\n\r\n        setBloomLevels({\r\n            remember: 3,\r\n            understand: 4,\r\n            apply: 5,\r\n            analyze: 4,\r\n            evaluate: 2,\r\n            create: 2\r\n        });\r\n\r\n        setTargetMarks(80);\r\n        setPatternSections([\r\n            { id: \"sec-a\", name: \"Section A\", type: \"mcq\", numQuestions: 10, marksPerQuestion: 1, totalMarks: 10 },\r\n            { id: \"sec-b\", name: \"Section B\", type: \"short_answer\", numQuestions: 10, marksPerQuestion: 3, totalMarks: 30 },\r\n            { id: \"sec-c\", name: \"Section C\", type: \"long_answer\", numQuestions: 8, marksPerQuestion: 5, totalMarks: 40 }\r\n        ]);\r\n\r\n        setTeacherInput(teacherMsg);\r\n\r\n        // 3. Initiate Sequential Triggering\r\n        setActiveAgentIndex(0);\r\n    };\r\n\r\n    return (\r\n        <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={handleDemo}\r\n            disabled={status !== \"idle\"}\r\n            className={cn(\r\n                \"w-full mb-6 border-slate-200 text-slate-600 hover:bg-slate-50 hover:text-slate-900\",\r\n                \"h-9 text-[11px] font-black uppercase tracking-widest shadow-sm transition-all\",\r\n                \"flex items-center justify-center gap-2 group\"\r\n            )}\r\n        >\r\n            <Sparkles className=\"h-3.5 w-3.5 text-amber-500 animate-pulse group-hover:scale-125 transition-transform\" />\r\n            AutoFill Demo\r\n            <PlayCircle className=\"h-3.5 w-3.5 opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n        </Button>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\BlooxanomyAgentCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeAgentIndex' is assigned a value but never used.","line":65,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3741,3744],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3741,3744],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/qpilot/BlooxanomyAgentCard.tsx\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Bloom's Taxonomy Agent interface. Handles cognitive level distribution \r\n * and maps questions to educational objectives.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useRef, useEffect } from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardHeader,\r\n    CardTitle,\r\n    CardDescription\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n    BrainCircuit,\r\n    CheckCircle2,\r\n    Loader2,\r\n    AlertCircle,\r\n    BarChart3,\r\n    SendHorizontal\r\n} from \"lucide-react\";\r\nimport { useBloomStore, type BloomLevels } from \"@/store/bloomStore\";\r\nimport { useQPilotStore } from \"@/store/qpilotStore\";\r\nimport { applyBloomDistribution } from \"@/lib/projectApi\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface BlooxanomyAgentCardProps {\r\n    projectId: string;\r\n}\r\n\r\nconst BLOOM_LEVELS: { id: keyof BloomLevels; label: string }[] = [\r\n    { id: \"remember\", label: \"Remember\" },\r\n    { id: \"understand\", label: \"Understand\" },\r\n    { id: \"apply\", label: \"Apply\" },\r\n    { id: \"analyze\", label: \"Analyze\" },\r\n    { id: \"evaluate\", label: \"Evaluate\" },\r\n    { id: \"create\", label: \"Create\" },\r\n];\r\n\r\nexport function BlooxanomyAgentCard({ projectId }: BlooxanomyAgentCardProps) {\r\n    const {\r\n        bloomLevels,\r\n        steps,\r\n        setLevel,\r\n        updateStep,\r\n        getTotalAssigned,\r\n        setError,\r\n        error\r\n    } = useBloomStore();\r\n\r\n    const {\r\n        agentStatuses,\r\n        setAgentStatus,\r\n        emitMessage,\r\n        setActiveAgentIndex,\r\n        activeAgentIndex,\r\n        triggerNextAgent\r\n    } = useQPilotStore();\r\n\r\n    const status = agentStatuses.bloom;\r\n\r\n    const pollingRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (pollingRef.current) clearInterval(pollingRef.current);\r\n        };\r\n    }, []);\r\n\r\n    const handleApply = async () => {\r\n        if (status === \"running\" || status === \"completed\") return;\r\n\r\n        const total = getTotalAssigned();\r\n        if (total === 0) {\r\n            setError(\"Please assign at least one question to a level.\");\r\n            return;\r\n        }\r\n\r\n        setAgentStatus(\"bloom\", \"running\");\r\n        setError(null);\r\n        setActiveAgentIndex(2);\r\n\r\n        // Minimal chat behavior for manual mode\r\n        emitMessage(\"Orchestrator\", \"orchestrator\", \"Applying Bloom's taxonomy distribution...\");\r\n\r\n        try {\r\n            await applyBloomDistribution({\r\n                projectId,\r\n                levels: bloomLevels\r\n            });\r\n\r\n            let stepIdx = 0;\r\n            pollingRef.current = setInterval(() => {\r\n                stepIdx++;\r\n\r\n                if (stepIdx <= steps.length) {\r\n                    if (stepIdx > 1) updateStep(stepIdx - 2, \"completed\");\r\n                    updateStep(stepIdx - 1, \"running\");\r\n                    // No verbose subprocess breakdown in chat\r\n                }\r\n\r\n                if (stepIdx === steps.length + 1) {\r\n                    updateStep(steps.length - 1, \"completed\");\r\n                    setAgentStatus(\"bloom\", \"completed\");\r\n\r\n                    emitMessage(\"Blooxanomy Agent\", \"agent\", \"Bloom levels successfully assigned.\");\r\n                    triggerNextAgent();\r\n\r\n                    if (pollingRef.current) clearInterval(pollingRef.current);\r\n                }\r\n            }, 1500);\r\n\r\n        } catch (err: any) {\r\n            setError(err?.message || \"Bloom's mapping failed.\");\r\n            setAgentStatus(\"bloom\", \"failed\");\r\n            emitMessage(\"Blooxanomy Agent\", \"agent\", \"Mapping interrupted. Semantic constraints violation detected.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className=\"w-full border-border/60 shadow-md\">\r\n            <CardHeader className=\"pb-3 px-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                        <CardTitle className=\"text-sm font-bold flex items-center gap-2\">\r\n                            <div className=\"p-1.5 rounded-md bg-indigo-500/10 text-indigo-600\">\r\n                                <BrainCircuit className=\"h-4 w-4\" />\r\n                            </div>\r\n                            Blooxanomy Agent\r\n                        </CardTitle>\r\n                        <CardDescription className=\"text-[10px] uppercase font-medium\">\r\n                            Cognitive Level Mapping\r\n                        </CardDescription>\r\n                    </div>\r\n                    {status === \"completed\" && (\r\n                        <Badge className=\"bg-indigo-500/10 text-indigo-600 border-indigo-200 text-[10px] h-5\">\r\n                            Mapped\r\n                        </Badge>\r\n                    )}\r\n                </div>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"px-4 pb-4 space-y-4\">\r\n                <div className=\"space-y-4 animate-in fade-in duration-300\">\r\n                    {/* Input Grid */}\r\n                    <div className=\"grid grid-cols-2 gap-x-6 gap-y-3 p-3 bg-muted/30 rounded-xl border border-border/40\">\r\n                        {BLOOM_LEVELS.map((level) => (\r\n                            <div key={level.id} className=\"flex items-center justify-between gap-2\">\r\n                                <span className=\"text-[11px] font-semibold text-muted-foreground\">{level.label}</span>\r\n                                <Input\r\n                                    type=\"number\"\r\n                                    disabled={status === \"running\"}\r\n                                    className=\"h-7 w-12 text-center text-[11px] font-bold p-1 bg-background\"\r\n                                    value={bloomLevels[level.id] || \"\"}\r\n                                    onChange={(e) => setLevel(level.id, parseInt(e.target.value) || 0)}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Summary Area */}\r\n                    <div className=\"flex items-center justify-between px-2\">\r\n                        <div className=\"flex items-center gap-2 text-indigo-600\">\r\n                            <BarChart3 className=\"h-4 w-4\" />\r\n                            <span className=\"text-xs font-bold tracking-tight\">Total Allocated: {getTotalAssigned()} questions</span>\r\n                        </div>\r\n                        {error && (\r\n                            <div className=\"flex items-center gap-1.5 text-[10px] text-destructive font-medium animate-in slide-in-from-right-2\">\r\n                                <AlertCircle className=\"h-3 w-3\" />\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <Separator className=\"opacity-50\" />\r\n\r\n                    <Button\r\n                        className={cn(\r\n                            \"w-full h-9 font-bold text-xs shadow-lg shadow-primary/10 transition-all\",\r\n                            status === \"completed\" || status === \"running\" ? \"bg-green-600 hover:bg-green-700\" : \"bg-primary\"\r\n                        )}\r\n                        onClick={handleApply}\r\n                        disabled={status === \"running\"}\r\n                    >\r\n                        {status === \"running\" ? (\r\n                            <Loader2 className=\"h-3.5 w-3.5 animate-spin mr-2\" />\r\n                        ) : status === \"completed\" ? (\r\n                            <CheckCircle2 className=\"h-3.5 w-3.5 mr-2\" />\r\n                        ) : (\r\n                            <SendHorizontal className=\"h-3.5 w-3.5 mr-2\" />\r\n                        )}\r\n                        {status === \"running\" ? \"Applying...\" : status === \"completed\" ? \"Distribution Applied\" : \"Apply Bloom Distribution\"}\r\n                    </Button>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\LivePaperView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ScrollArea' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":20,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"ScrollArea"},"fix":{"range":[124,183],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Card"},"fix":{"range":[192,197],"text":""},"desc":"Remove unused variable \"Card\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":9,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":27,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"CardContent"},"fix":{"range":[183,242],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":12,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Sparkles"},"fix":{"range":[361,370],"text":""},"desc":"Remove unused variable \"Sparkles\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":12,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"FileText"},"fix":{"range":[369,379],"text":""},"desc":"Remove unused variable \"FileText\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BadgeCheck' is defined but never used.","line":12,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":40,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"BadgeCheck"},"fix":{"range":[379,391],"text":""},"desc":"Remove unused variable \"BadgeCheck\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/qpilot/LivePaperView.tsx\r\n */\r\n\r\nimport { useQPilotStore } from \"@/store/qpilotStore\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Sparkles, FileText, BadgeCheck, Loader2 } from \"lucide-react\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\nexport function LivePaperView() {\r\n    const { paperContent, status } = useQPilotStore();\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-slate-50/50 dark:bg-slate-950/20\">\r\n\r\n            <div className=\"flex-1 overflow-y-auto\">\r\n                <div className=\"max-w-[800px] mx-auto p-8 lg:p-12 min-h-full bg-card shadow-sm border-x border-border/40\">\r\n                    {paperContent.length === 0 ? (\r\n                        <div className=\"space-y-12 py-10\">\r\n                            <div className=\"text-center space-y-4\">\r\n                                <Skeleton className=\"h-8 w-48 mx-auto\" />\r\n                                <Skeleton className=\"h-4 w-32 mx-auto\" />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-8\">\r\n                                <div className=\"space-y-3\">\r\n                                    <Skeleton className=\"h-6 w-32\" />\r\n                                    <Separator />\r\n                                    <div className=\"space-y-4\">\r\n                                        <Skeleton className=\"h-20 w-full\" />\r\n                                        <Skeleton className=\"h-20 w-full\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-12 animate-in fade-in duration-1000\">\r\n                            {/* Institutional Header Sim */}\r\n                            <div className=\"text-center space-y-2 mb-12 border-b-2 border-primary/10 pb-8\">\r\n                                <h1 className=\"text-xl font-bold uppercase tracking-tight\">Standard Question Paper</h1>\r\n                                <p className=\"text-sm text-muted-foreground font-medium\">Academic Session 2025-26</p>\r\n                            </div>\r\n\r\n                            {paperContent.map((section) => (\r\n                                <section key={section.id} className=\"space-y-6\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <h3 className=\"text-base font-bold text-foreground uppercase tracking-wider\">{section.title}</h3>\r\n                                        <Badge variant=\"outline\" className=\"font-mono text-[10px]\">\r\n                                            {section.questions.reduce((sum, q) => sum + q.marks, 0)} Marks Total\r\n                                        </Badge>\r\n                                    </div>\r\n                                    <Separator className=\"bg-primary/10\" />\r\n\r\n                                    <div className=\"space-y-10\">\r\n                                        {section.questions.map((q) => (\r\n                                            <div key={q.id} className=\"group relative pl-8\">\r\n                                                <span className=\"absolute left-0 top-0 font-bold text-muted-foreground/50 group-hover:text-primary transition-colors\">\r\n                                                    {q.number}.\r\n                                                </span>\r\n                                                <div className=\"flex justify-between items-start gap-6\">\r\n                                                    <p className=\"text-sm leading-relaxed text-foreground/90 font-medium italic\">\r\n                                                        {q.text}\r\n                                                    </p>\r\n                                                    <span className=\"text-xs font-bold tabular-nums text-muted-foreground bg-muted px-2 py-0.5 rounded flex-shrink-0\">\r\n                                                        [{q.marks} m]\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </section>\r\n                            ))}\r\n\r\n                            {status === 'running' && (\r\n                                <div className=\"py-8 border-t border-dashed space-y-4\">\r\n                                    <div className=\"flex items-center gap-2 text-primary\">\r\n                                        <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                                        <span className=\"text-xs font-bold tracking-widest uppercase\">Agent Writing...</span>\r\n                                    </div>\r\n                                    <Skeleton className=\"h-16 w-full opacity-50\" />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\PaperPatternAgentCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":28,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Badge"},"fix":{"range":[769,817],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":40,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronRight"},"fix":{"range":[1002,1021],"text":""},"desc":"Remove unused variable \"ChevronRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeAgentIndex' is assigned a value but never used.","line":77,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isUnder' is assigned a value but never used.","line":88,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4603,4606],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4603,4606],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/qpilot/PaperPatternAgentCard.tsx\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Agent card for defining the paper's structural pattern.\r\n * Manages section-wise question types, counts, and marks weightage.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useRef, useEffect } from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardHeader,\r\n    CardTitle,\r\n    CardDescription\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue\r\n} from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n    Layers,\r\n    Plus,\r\n    Trash2,\r\n    Play,\r\n    Loader2,\r\n    CheckCircle2,\r\n    AlertCircle,\r\n    Hash,\r\n    Award,\r\n    ChevronRight\r\n} from \"lucide-react\";\r\nimport { usePatternStore } from \"@/store/patternStore\";\r\nimport { useQPilotStore } from \"@/store/qpilotStore\";\r\nimport { applyPaperPattern } from \"@/lib/projectApi\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface PaperPatternAgentCardProps {\r\n    projectId: string;\r\n}\r\n\r\nconst QUESTION_TYPES = [\r\n    { value: \"mcq\", label: \"MCQ\" },\r\n    { value: \"short_answer\", label: \"Short Answer\" },\r\n    { value: \"long_answer\", label: \"Long Answer\" },\r\n    { value: \"case_study\", label: \"Case Study\" },\r\n];\r\n\r\nexport function PaperPatternAgentCard({ projectId }: PaperPatternAgentCardProps) {\r\n    const {\r\n        sections,\r\n        totalMarks,\r\n        steps,\r\n        addSection,\r\n        updateSection,\r\n        deleteSection,\r\n        updateStep,\r\n        getTotalAllocated,\r\n        setError,\r\n        error\r\n    } = usePatternStore();\r\n\r\n    const {\r\n        agentStatuses,\r\n        setAgentStatus,\r\n        emitMessage,\r\n        setActiveAgentIndex,\r\n        activeAgentIndex,\r\n        triggerNextAgent\r\n    } = useQPilotStore();\r\n\r\n    const status = agentStatuses.pattern;\r\n\r\n    const pollingRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    const totalAllocated = getTotalAllocated();\r\n    const isMatched = totalAllocated === totalMarks;\r\n    const isExceeded = totalAllocated > totalMarks;\r\n    const isUnder = totalAllocated < totalMarks;\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (pollingRef.current) clearInterval(pollingRef.current);\r\n        };\r\n    }, []);\r\n\r\n    const handleAddSection = () => {\r\n        addSection({\r\n            name: `Section ${String.fromCharCode(65 + sections.length)}`,\r\n            type: \"mcq\",\r\n            numQuestions: 5,\r\n            marksPerQuestion: 1,\r\n        });\r\n    };\r\n\r\n    const handleApply = async () => {\r\n        if (status === \"running\" || status === \"completed\") return;\r\n\r\n        if (sections.length === 0) {\r\n            setError(\"Please add at least one section.\");\r\n            return;\r\n        }\r\n        if (!isMatched) {\r\n            setError(`Marks mismatch. Target: ${totalMarks}, Allocated: ${totalAllocated}`);\r\n            return;\r\n        }\r\n\r\n        setAgentStatus(\"pattern\", \"running\");\r\n        setError(null);\r\n        setActiveAgentIndex(3);\r\n\r\n        // Minimal chat behavior\r\n        emitMessage(\"Orchestrator\", \"orchestrator\", \"Validating paper pattern...\");\r\n\r\n        try {\r\n            await applyPaperPattern({\r\n                projectId,\r\n                sections: sections.map(s => ({\r\n                    name: s.name,\r\n                    type: s.type,\r\n                    numQuestions: s.numQuestions,\r\n                    marksPerQuestion: s.marksPerQuestion\r\n                }))\r\n            });\r\n\r\n            let stepIdx = 0;\r\n            pollingRef.current = setInterval(() => {\r\n                stepIdx++;\r\n                if (stepIdx <= steps.length) {\r\n                    if (stepIdx > 1) updateStep(stepIdx - 2, \"completed\");\r\n                    updateStep(stepIdx - 1, \"running\");\r\n                    // No verbose subprocess breakdown in chat\r\n                }\r\n                if (stepIdx === steps.length + 1) {\r\n                    updateStep(steps.length - 1, \"completed\");\r\n                    setAgentStatus(\"pattern\", \"completed\");\r\n\r\n                    emitMessage(\"Paper Pattern Agent\", \"agent\", \"Section configuration saved.\");\r\n                    triggerNextAgent();\r\n\r\n                    if (pollingRef.current) clearInterval(pollingRef.current);\r\n                }\r\n            }, 1500);\r\n\r\n        } catch (err: any) {\r\n            setError(err?.message || \"Pattern application failed.\");\r\n            setAgentStatus(\"pattern\", \"failed\");\r\n            emitMessage(\"Paper Pattern Agent\", \"agent\", \"Validation failure: Structural constraints not met.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className=\"w-full border-border/60 shadow-md\">\r\n            <CardHeader className=\"pb-3 px-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                        <CardTitle className=\"text-sm font-bold flex items-center gap-2\">\r\n                            <div className=\"p-1.5 rounded-md bg-emerald-500/10 text-emerald-600\">\r\n                                <Layers className=\"h-3.5 w-3.5\" />\r\n                            </div>\r\n                            Paper Pattern Agent\r\n                        </CardTitle>\r\n                        <CardDescription className=\"text-[10px] uppercase font-bold tracking-tight text-muted-foreground/60\">\r\n                            Weightage Configuration\r\n                        </CardDescription>\r\n                    </div>\r\n                    <Button\r\n                        size=\"sm\"\r\n                        variant=\"ghost\"\r\n                        className=\"h-7 px-2 text-[10px] font-bold text-emerald-600 hover:bg-emerald-500/10\"\r\n                        onClick={handleAddSection}\r\n                    >\r\n                        <Plus className=\"h-3 w-3 mr-1\" />\r\n                        Add Section\r\n                    </Button>\r\n                </div>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"px-3 pb-4 space-y-4\">\r\n                <div className=\"space-y-4 animate-in fade-in duration-300\">\r\n                    {sections.length === 0 ? (\r\n                        <div className=\"py-6 text-center border-2 border-dashed border-muted rounded-xl bg-muted/20\">\r\n                            <p className=\"text-[11px] text-muted-foreground font-semibold\">No sections added yet.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {sections.map((section) => (\r\n                                <div key={section.id} className=\"p-2.5 bg-muted/30 rounded-lg border border-border/40 space-y-2.5 relative group\">\r\n                                    <button\r\n                                        onClick={() => deleteSection(section.id)}\r\n                                        disabled={status === \"running\"}\r\n                                        className=\"absolute top-1.5 right-1.5 p-1 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity disabled:cursor-not-allowed\"\r\n                                    >\r\n                                        <Trash2 className=\"h-3 w-3\" />\r\n                                    </button>\r\n\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <Input\r\n                                            value={section.name}\r\n                                            disabled={status === \"running\"}\r\n                                            onChange={(e) => updateSection(section.id, { name: e.target.value })}\r\n                                            className=\"h-6 text-[11px] font-bold bg-background flex-1\"\r\n                                        />\r\n                                        <Select\r\n                                            disabled={status === \"running\"}\r\n                                            value={section.type}\r\n                                            onValueChange={(val) => updateSection(section.id, { type: val })}\r\n                                        >\r\n                                            <SelectTrigger className=\"h-6 w-28 text-[11px] bg-background\">\r\n                                                <SelectValue />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                {QUESTION_TYPES.map(t => <SelectItem key={t.value} value={t.value} className=\"text-[11px]\">{t.label}</SelectItem>)}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"flex-1 flex items-center bg-background rounded border h-6 px-1.5 border-border/60\">\r\n                                            <Hash className=\"h-2.5 w-2.5 text-muted-foreground mr-1\" />\r\n                                            <Input\r\n                                                type=\"number\"\r\n                                                disabled={status === \"running\"}\r\n                                                value={section.numQuestions}\r\n                                                onChange={(e) => updateSection(section.id, { numQuestions: parseInt(e.target.value) || 0 })}\r\n                                                className=\"h-full border-none shadow-none text-[11px] font-bold p-0 focus-visible:ring-0\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"flex-1 flex items-center bg-background rounded border h-6 px-1.5 border-border/60\">\r\n                                            <Award className=\"h-2.5 w-2.5 text-muted-foreground mr-1\" />\r\n                                            <Input\r\n                                                type=\"number\"\r\n                                                disabled={status === \"running\"}\r\n                                                value={section.marksPerQuestion}\r\n                                                onChange={(e) => updateSection(section.id, { marksPerQuestion: parseInt(e.target.value) || 0 })}\r\n                                                className=\"h-full border-none shadow-none text-[11px] font-bold p-0 focus-visible:ring-0\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"h-6 px-2 flex items-center bg-emerald-500/10 border border-emerald-500/20 rounded-md\">\r\n                                            <span className=\"text-[10px] font-black text-emerald-700\">{section.totalMarks}M</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Allocation Meter */}\r\n                    <div className=\"px-1 space-y-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <span className=\"text-[10px] font-black uppercase text-muted-foreground tracking-widest\">Weightage Status</span>\r\n                            <span className={cn(\r\n                                \"text-[10px] font-bold px-2 py-0.5 rounded border\",\r\n                                isMatched ? \"text-emerald-600 bg-emerald-50 border-emerald-200\" :\r\n                                    isExceeded ? \"text-destructive bg-destructive/5 border-destructive/20\" :\r\n                                        \"text-amber-600 bg-amber-50 border-amber-200\"\r\n                            )}>\r\n                                {totalAllocated} / {totalMarks} Marks\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"h-1 w-full bg-muted rounded-full overflow-hidden flex\">\r\n                            <div\r\n                                className={cn(\r\n                                    \"h-full transition-all duration-500\",\r\n                                    isExceeded ? \"bg-destructive w-full\" : isMatched ? \"bg-emerald-500 w-full\" : \"bg-amber-500\"\r\n                                )}\r\n                                style={{ width: isExceeded ? '100%' : `${(totalAllocated / totalMarks) * 100}%` }}\r\n                            />\r\n                        </div>\r\n                        {error && (\r\n                            <div className=\"flex items-center gap-1.5 text-[10px] text-destructive font-bold bg-destructive/5 p-2 rounded border border-destructive/10 animate-in shake-in\">\r\n                                <AlertCircle className=\"h-3 w-3\" />\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <Separator className=\"opacity-40\" />\r\n\r\n                    <Button\r\n                        className={cn(\r\n                            \"w-full h-9 font-black text-[11px] uppercase tracking-widest transition-all\",\r\n                            status === \"completed\" || status === \"running\" ? \"bg-green-600 hover:bg-green-700\" : \"bg-primary shadow-xl shadow-primary/10\"\r\n                        )}\r\n                        onClick={handleApply}\r\n                        disabled={isExceeded || status === \"running\"}\r\n                    >\r\n                        {status === \"running\" ? (\r\n                            <Loader2 className=\"h-3.5 w-3.5 animate-spin mr-2\" />\r\n                        ) : status === \"completed\" ? (\r\n                            <CheckCircle2 className=\"h-3.5 w-3.5 mr-2\" />\r\n                        ) : (\r\n                            <Play className=\"h-3 w-3 mr-2\" />\r\n                        )}\r\n                        {status === \"running\" ? \"Verifying...\" : status === \"completed\" ? \"Pattern Applied\" : \"Apply Pattern\"}\r\n                    </Button>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\PyqAgentCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1930,1933],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1930,1933],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleStart'. Either include it or remove the dependency array.","line":92,"column":8,"nodeType":"ArrayExpression","endLine":92,"endColumn":68,"suggestions":[{"desc":"Update the dependencies array to be: [fileName, textContent, activeTab, status, activeAgentIndex, handleStart]","fix":{"range":[2490,2550],"text":"[fileName, textContent, activeTab, status, activeAgentIndex, handleStart]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4781,4784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4781,4784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/qpilot/PyqAgentCard.tsx\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Compact card for the Previous Year Questions Agent.\r\n * Supports PDF uploads, text paste, and dynamic subprocess tracking.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardHeader,\r\n    CardTitle\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    History,\r\n    FileUp,\r\n    Type,\r\n    Play,\r\n    Loader2,\r\n    CheckCircle2,\r\n    AlertCircle\r\n} from \"lucide-react\";\r\nimport { usePyqStore } from \"@/store/pyqStore\";\r\nimport { useQPilotStore } from \"@/store/qpilotStore\";\r\nimport { processPyqs } from \"@/lib/projectApi\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface PyqAgentCardProps {\r\n    projectId: string;\r\n}\r\n\r\nconst YEARS = [\"2025\", \"2024\", \"2023\", \"2022\", \"2021\", \"2020\"];\r\n\r\nexport function PyqAgentCard({ projectId }: PyqAgentCardProps) {\r\n    const {\r\n        steps,\r\n        fileName,\r\n        textContent,\r\n        year,\r\n        board,\r\n        setFileName,\r\n        setTextContent,\r\n        setYear,\r\n        setBoard,\r\n        updateStep,\r\n        setError,\r\n        error\r\n    } = usePyqStore();\r\n\r\n    const {\r\n        agentStatuses,\r\n        setAgentStatus,\r\n        emitMessage,\r\n        setActiveAgentIndex,\r\n        activeAgentIndex,\r\n        triggerNextAgent\r\n    } = useQPilotStore();\r\n\r\n    const status = agentStatuses.pyq;\r\n\r\n    const [activeTab, setActiveTab] = useState<\"pdf\" | \"text\" | any>(\"pdf\");\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const pollingRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (textContent.length > 50 && !fileName) {\r\n            setActiveTab(\"text\");\r\n        }\r\n    }, [textContent, fileName]);\r\n\r\n    // Auto-trigger when data is available\r\n    useEffect(() => {\r\n        const hasData = activeTab === \"pdf\" ? fileName : textContent.length > 50;\r\n        if (hasData && status === \"idle\" && activeAgentIndex === 1) {\r\n            handleStart();\r\n        }\r\n    }, [fileName, textContent, activeTab, status, activeAgentIndex]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (pollingRef.current) clearInterval(pollingRef.current);\r\n        };\r\n    }, []);\r\n\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            if (file.type !== \"application/pdf\") {\r\n                setError(\"Please upload a PDF file.\");\r\n                return;\r\n            }\r\n            setFileName(file.name);\r\n            setError(null);\r\n        }\r\n    };\r\n\r\n    const handleStart = async () => {\r\n        if (status === \"running\" || status === \"completed\") return;\r\n\r\n        setAgentStatus(\"pyq\", \"running\");\r\n        setError(null);\r\n        setActiveAgentIndex(1); // PYQ Agent is index 1\r\n\r\n        emitMessage(\"Orchestrator\", \"orchestrator\", \"Initializing PYQ retrieval sequence...\");\r\n        emitMessage(\"PYQ Agent\", \"agent\", `Processing historical data from ${year} (${board})...`);\r\n\r\n        try {\r\n            await processPyqs({\r\n                projectId,\r\n                sourceType: activeTab,\r\n                content: activeTab === \"text\" ? textContent : undefined,\r\n                year,\r\n                board\r\n            });\r\n\r\n            let stepIdx = 0;\r\n            pollingRef.current = setInterval(() => {\r\n                stepIdx++;\r\n\r\n                if (stepIdx <= steps.length) {\r\n                    if (stepIdx > 1) updateStep(stepIdx - 2, \"completed\");\r\n                    updateStep(stepIdx - 1, \"running\");\r\n                    emitMessage(\"PYQ Agent\", \"agent\", `${steps[stepIdx - 1].label} in progress...`);\r\n                }\r\n\r\n                if (stepIdx === steps.length + 1) {\r\n                    updateStep(steps.length - 1, \"completed\");\r\n                    setAgentStatus(\"pyq\", \"completed\");\r\n                    emitMessage(\"PYQ Agent\", \"agent\", \"Historical analysis complete. Patterns identified.\");\r\n                    emitMessage(\"Orchestrator\", \"orchestrator\", \"PYQ processing complete. Calling Blooxanomy Agent...\");\r\n                    triggerNextAgent();\r\n\r\n                    if (pollingRef.current) clearInterval(pollingRef.current);\r\n                }\r\n            }, 2000);\r\n\r\n        } catch (err: any) {\r\n            setError(err?.message || \"PYQ processing failed.\");\r\n            setAgentStatus(\"pyq\", \"failed\");\r\n            emitMessage(\"PYQ Agent\", \"agent\", \"Encountered a hurdle during data processing. Awaiting recovery.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className=\"w-full border-border/60 shadow-md\">\r\n            <CardHeader className=\"pb-3 px-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <CardTitle className=\"text-sm font-bold flex items-center gap-2\">\r\n                        <div className=\"p-1.5 rounded-md bg-amber-500/10 text-amber-600\">\r\n                            <History className=\"h-4 w-4\" />\r\n                        </div>\r\n                        Previous Year Questions Agent\r\n                    </CardTitle>\r\n                    {status === \"completed\" && (\r\n                        <Badge className=\"bg-green-500/10 text-green-600 border-green-200 text-[10px] h-5\">\r\n                            Synced\r\n                        </Badge>\r\n                    )}\r\n                </div>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"px-4 pb-4 space-y-4\">\r\n                {status === \"idle\" ? (\r\n                    <div className=\"space-y-4 animate-in fade-in duration-300\">\r\n                        {/* Context Filters */}\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <Select value={year} onValueChange={setYear}>\r\n                                <SelectTrigger className=\"h-8 text-[11px] font-bold\">\r\n                                    <SelectValue placeholder=\"Year\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {YEARS.map(y => <SelectItem key={y} value={y} className=\"text-[11px] font-bold\">{y}</SelectItem>)}\r\n                                </SelectContent>\r\n                            </Select>\r\n                            <Input\r\n                                placeholder=\"Board\"\r\n                                className=\"h-8 text-[11px] font-bold\"\r\n                                value={board}\r\n                                onChange={(e) => setBoard(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Tab Selection */}\r\n                        <div className=\"flex gap-1 p-1 bg-muted/50 rounded-lg text-muted-foreground\">\r\n                            <Button\r\n                                variant={activeTab === \"pdf\" ? \"secondary\" : \"ghost\"}\r\n                                size=\"sm\"\r\n                                className=\"flex-1 text-[11px] h-7 font-bold\"\r\n                                onClick={() => setActiveTab(\"pdf\")}\r\n                            >\r\n                                <FileUp className=\"h-3 w-3 mr-2\" />\r\n                                PDF Upload\r\n                            </Button>\r\n                            <Button\r\n                                variant={activeTab === \"text\" ? \"secondary\" : \"ghost\"}\r\n                                size=\"sm\"\r\n                                className=\"flex-1 text-[11px] h-7 font-bold\"\r\n                                onClick={() => setActiveTab(\"text\")}\r\n                            >\r\n                                <Type className=\"h-3 w-3 mr-2\" />\r\n                                Text Paste\r\n                            </Button>\r\n                        </div>\r\n\r\n                        {activeTab === \"pdf\" ? (\r\n                            <div className=\"space-y-2\">\r\n                                <input\r\n                                    type=\"file\"\r\n                                    accept=\".pdf\"\r\n                                    className=\"hidden\"\r\n                                    ref={fileInputRef}\r\n                                    onChange={handleFileChange}\r\n                                />\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    className=\"w-full h-16 border-dashed flex flex-col gap-1 hover:bg-amber-500/5 hover:border-amber-500/50\"\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                >\r\n                                    <FileUp className=\"h-4 w-4 text-muted-foreground\" />\r\n                                    <span className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-tight\">\r\n                                        {fileName || \"PYQ PDF\"}\r\n                                    </span>\r\n                                </Button>\r\n                            </div>\r\n                        ) : (\r\n                            <Textarea\r\n                                placeholder=\"Paste previous year questions here...\"\r\n                                className=\"text-[11px] min-h-[80px] resize-none focus:ring-1\"\r\n                                value={textContent}\r\n                                onChange={(e) => setTextContent(e.target.value)}\r\n                            />\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-4 py-1 animate-in fade-in duration-400\">\r\n                        <div className=\"space-y-2.5\">\r\n                            {steps.map((step, idx) => {\r\n                                const isActive = step.status === \"running\";\r\n                                const isDone = step.status === \"completed\";\r\n                                const isFail = step.status === \"failed\";\r\n\r\n                                return (\r\n                                    <div key={idx} className=\"flex items-center gap-3 px-1\">\r\n                                        <div className={cn(\r\n                                            \"h-1.5 w-1.5 rounded-full transition-all duration-300\",\r\n                                            isActive ? \"bg-blue-500 animate-pulse ring-4 ring-blue-500/20\" : \"bg-muted-foreground/30\",\r\n                                            isDone ? \"bg-green-500\" : \"\",\r\n                                            isFail ? \"bg-red-500\" : \"\"\r\n                                        )} />\r\n                                        <span className={cn(\r\n                                            \"text-[10px] font-bold uppercase tracking-widest transition-colors\",\r\n                                            isActive ? \"text-blue-600\" : \"text-muted-foreground/60\",\r\n                                            isDone ? \"text-green-600/70\" : \"\"\r\n                                        )}>\r\n                                            {step.label}\r\n                                        </span>\r\n                                        {isActive && <Loader2 className=\"h-3 w-3 animate-spin text-blue-500 ml-auto\" />}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {error && (\r\n                    <div className=\"flex items-center gap-2 text-[10px] font-bold text-destructive bg-destructive/5 p-2 rounded border border-destructive/20 uppercase tracking-tight\">\r\n                        <AlertCircle className=\"h-3 w-3\" />\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <Button\r\n                    className={cn(\r\n                        \"w-full h-10 font-black text-[11px] uppercase tracking-[0.15em] transition-all\",\r\n                        status === \"running\" || status === \"completed\" ? \"bg-green-600 hover:bg-green-700 disabled:opacity-100\" : \"bg-primary\"\r\n                    )}\r\n                    onClick={handleStart}\r\n                    disabled={status === \"running\" || status === \"completed\"}\r\n                >\r\n                    {status === \"running\" ? (\r\n                        <>\r\n                            <Loader2 className=\"h-3.5 w-3.5 mr-2 animate-spin\" />\r\n                            Processing...\r\n                        </>\r\n                    ) : status === \"completed\" ? (\r\n                        <>\r\n                            <CheckCircle2 className=\"h-3.5 w-3.5 mr-2\" />\r\n                            Completed\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Play className=\"h-3 w-3 mr-2\" />\r\n                            Process PYQs\r\n                        </>\r\n                    )}\r\n                </Button>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\QPilotMetadataForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\QPilotSectionConfig.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":29,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":52,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronRight"},"fix":{"range":[862,876],"text":""},"desc":"Remove unused variable \"ChevronRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used.","line":30,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Separator"},"fix":{"range":[914,970],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/qpilot/QPilotSectionConfig.tsx\r\n */\r\n\r\nimport { useState } from \"react\";\r\nimport { useQPilotConfigStore, type QPilotSection, type QuestionType, type Difficulty } from \"@/store/qpilotConfigStore\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogFooter,\r\n    DialogDescription\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue\r\n} from \"@/components/ui/select\";\r\nimport { Layers, Plus, Pencil, Trash2, ChevronRight, AlertCircle } from \"lucide-react\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\n\r\nconst QUESTION_TYPES: { value: QuestionType; label: string }[] = [\r\n    { value: \"mcq\", label: \"MCQ\" },\r\n    { value: \"short_answer\", label: \"Short Answer\" },\r\n    { value: \"long_answer\", label: \"Long Answer\" },\r\n    { value: \"fill_in_the_blank\", label: \"Fill Blank\" },\r\n    { value: \"true_false\", label: \"True / False\" },\r\n];\r\n\r\nconst DIFFICULTIES: Difficulty[] = [\"easy\", \"medium\", \"hard\"];\r\n\r\nexport function QPilotSectionConfig() {\r\n    const { sections, metadata, addSection, updateSection, removeSection, getTotalSectionMarks } = useQPilotConfigStore();\r\n\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n    const [form, setForm] = useState<Omit<QPilotSection, \"id\">>({\r\n        title: \"\",\r\n        type: \"mcq\",\r\n        numQuestions: 5,\r\n        marksPerQuestion: 1,\r\n        difficulty: \"medium\",\r\n    });\r\n\r\n    const openAdd = () => {\r\n        setEditingId(null);\r\n        setForm({ title: \"\", type: \"mcq\", numQuestions: 5, marksPerQuestion: 1, difficulty: \"medium\" });\r\n        setIsOpen(true);\r\n    };\r\n\r\n    const openEdit = (section: QPilotSection) => {\r\n        setEditingId(section.id);\r\n        setForm({ ...section });\r\n        setIsOpen(true);\r\n    };\r\n\r\n    const handleSave = () => {\r\n        if (!form.title) return;\r\n        if (editingId) {\r\n            updateSection(editingId, form);\r\n        } else {\r\n            addSection(form);\r\n        }\r\n        setIsOpen(false);\r\n    };\r\n\r\n    const currentTotal = getTotalSectionMarks();\r\n    const isMarksMatching = currentTotal === metadata.totalMarks;\r\n\r\n    return (\r\n        <Card className=\"border-border/60 shadow-sm overflow-hidden\">\r\n            <CardHeader className=\"bg-muted/30 border-b border-border/50 py-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"p-2 rounded-lg bg-primary/10 text-primary\">\r\n                            <Layers className=\"h-5 w-5\" />\r\n                        </div>\r\n                        <div>\r\n                            <CardTitle className=\"text-sm font-bold uppercase tracking-wider\">Section Configuration</CardTitle>\r\n                            <CardDescription className=\"text-xs\">Define question types and weightage per section.</CardDescription>\r\n                        </div>\r\n                    </div>\r\n                    <Button size=\"sm\" onClick={openAdd} className=\"gap-2 h-8\">\r\n                        <Plus className=\"h-4 w-4\" />\r\n                        Add Section\r\n                    </Button>\r\n                </div>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"p-0\">\r\n                <div className=\"flex flex-col\">\r\n                    {sections.length === 0 ? (\r\n                        <div className=\"p-12 text-center flex flex-col items-center gap-3\">\r\n                            <div className=\"h-12 w-12 rounded-full bg-muted flex items-center justify-center\">\r\n                                <Plus className=\"h-6 w-6 text-muted-foreground\" />\r\n                            </div>\r\n                            <p className=\"text-sm text-muted-foreground\">No sections added. Click the button above to start.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"divide-y divide-border/40\">\r\n                            {sections.map((section) => (\r\n                                <div key={section.id} className=\"p-4 flex items-center justify-between group hover:bg-muted/30 transition-colors\">\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className=\"h-10 w-10 rounded-lg border border-border/50 bg-background flex flex-col items-center justify-center\">\r\n                                            <span className=\"text-[10px] font-bold text-muted-foreground uppercase\">{section.type.charAt(0)}</span>\r\n                                            <span className=\"text-xs font-bold leading-none\">{section.numQuestions}</span>\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"text-sm font-bold text-foreground\">{section.title}</h4>\r\n                                            <div className=\"flex items-center gap-2 mt-1\">\r\n                                                <Badge variant=\"outline\" className=\"text-[9px] uppercase tracking-tighter h-4\">\r\n                                                    {section.type.replace('_', ' ')}\r\n                                                </Badge>\r\n                                                <Badge className={`text-[9px] uppercase tracking-tighter h-4 font-bold ${section.difficulty === 'easy' ? 'bg-green-500' :\r\n                                                        section.difficulty === 'hard' ? 'bg-destructive' : 'bg-amber-500'\r\n                                                    }`}>\r\n                                                    {section.difficulty}\r\n                                                </Badge>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center gap-6\">\r\n                                        <div className=\"text-right\">\r\n                                            <p className=\"text-sm font-bold text-foreground\">{section.numQuestions * section.marksPerQuestion}m</p>\r\n                                            <p className=\"text-[10px] text-muted-foreground\">{section.marksPerQuestion}m per Q</p>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-1\">\r\n                                            <Button variant=\"ghost\" size=\"icon\" onClick={() => openEdit(section)} className=\"h-8 w-8 hover:bg-primary/10 hover:text-primary\">\r\n                                                <Pencil className=\"h-3.5 w-3.5\" />\r\n                                            </Button>\r\n                                            <Button variant=\"ghost\" size=\"icon\" onClick={() => removeSection(section.id)} className=\"h-8 w-8 hover:bg-destructive/10 hover:text-destructive\">\r\n                                                <Trash2 className=\"h-3.5 w-3.5\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n\r\n            <CardFooter className=\"bg-muted/20 border-t border-border/50 p-4 flex items-center justify-between\">\r\n                <div className=\"flex gap-4\">\r\n                    <div className=\"space-y-0.5\">\r\n                        <p className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest\">Total Allocated</p>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <span className={isMarksMatching ? \"text-lg font-bold text-green-600\" : \"text-lg font-bold text-amber-500\"}>\r\n                                {currentTotal}\r\n                            </span>\r\n                            <span className=\"text-xs text-muted-foreground\">/ {metadata.totalMarks} marks</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {!isMarksMatching && sections.length > 0 && (\r\n                    <div className=\"flex items-center gap-2 text-[11px] font-medium text-amber-600 animate-pulse\">\r\n                        <AlertCircle className=\"h-3.5 w-3.5\" />\r\n                        Marks Mismatch: Difference of {Math.abs(metadata.totalMarks - currentTotal)}\r\n                    </div>\r\n                )}\r\n            </CardFooter>\r\n\r\n            {/* Add / Edit Dialog */}\r\n            <Dialog open={isOpen} onOpenChange={setIsOpen}>\r\n                <DialogContent className=\"sm:max-w-[425px]\">\r\n                    <DialogHeader>\r\n                        <DialogTitle>{editingId ? \"Edit Section\" : \"Add New Section\"}</DialogTitle>\r\n                        <DialogDescription>\r\n                            Define the questions and marks for this section.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n\r\n                    <div className=\"grid gap-4 py-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"sec-title\">Section Title</Label>\r\n                            <Input id=\"sec-title\" value={form.title} onChange={(e) => setForm({ ...form, title: e.target.value })} placeholder=\"e.g. Physics - Section A\" />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"sec-type\">Question Type</Label>\r\n                                <Select value={form.type} onValueChange={(v) => setForm({ ...form, type: v as QuestionType })}>\r\n                                    <SelectTrigger id=\"sec-type\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {QUESTION_TYPES.map(t => <SelectItem key={t.value} value={t.value}>{t.label}</SelectItem>)}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"sec-diff\">Difficulty</Label>\r\n                                <Select value={form.difficulty} onValueChange={(v) => setForm({ ...form, difficulty: v as Difficulty })}>\r\n                                    <SelectTrigger id=\"sec-diff\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {DIFFICULTIES.map(d => <SelectItem key={d} value={d} className=\"capitalize\">{d}</SelectItem>)}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"sec-num\">Questions</Label>\r\n                                <Input id=\"sec-num\" type=\"number\" value={form.numQuestions} onChange={(e) => setForm({ ...form, numQuestions: parseInt(e.target.value) || 0 })} />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"sec-marks\">Marks per Q</Label>\r\n                                <Input id=\"sec-marks\" type=\"number\" value={form.marksPerQuestion} onChange={(e) => setForm({ ...form, marksPerQuestion: parseInt(e.target.value) || 0 })} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-3 bg-muted rounded-lg flex justify-between items-center text-xs\">\r\n                            <span className=\"font-bold text-muted-foreground uppercase tracking-widest\">Section Total</span>\r\n                            <span className=\"text-lg font-bold text-foreground\">{form.numQuestions * form.marksPerQuestion} Marks</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => setIsOpen(false)}>Cancel</Button>\r\n                        <Button onClick={handleSave} disabled={!form.title}>Save Section</Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\QPilotSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isMobile' is assigned a value but never used.","line":34,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/qpilot/QPilotSidebar.tsx\r\n */\r\n\r\nimport { LayoutDashboard, Rocket, History, Settings, ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport {\r\n    Sidebar,\r\n    SidebarContent,\r\n    SidebarGroup,\r\n    SidebarGroupContent,\r\n    SidebarGroupLabel,\r\n    SidebarMenu,\r\n    SidebarMenuButton,\r\n    SidebarMenuItem,\r\n    SidebarHeader,\r\n    useSidebar\r\n} from \"@/components/ui/sidebar\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nconst NAV_ITEMS = [\r\n    { title: \"Dashboard\", href: \"/dashboard\", icon: LayoutDashboard },\r\n    { title: \"QPilot\", href: \"/qpilot\", icon: Rocket },\r\n    { title: \"History\", href: \"/history\", icon: History },\r\n    { title: \"Settings\", href: \"/settings\", icon: Settings },\r\n];\r\n\r\nexport function QPilotSidebar() {\r\n    const pathname = usePathname();\r\n    const { state, toggleSidebar, isMobile } = useSidebar();\r\n    const isCollapsed = state === \"collapsed\";\r\n\r\n    return (\r\n        <Sidebar\r\n            className=\"border-r border-border/50 bg-card/10 transition-all duration-300 ease-in-out\"\r\n            collapsible=\"icon\"\r\n        >\r\n            <SidebarHeader className=\"h-14 flex items-center justify-between px-3 border-b border-border/30\">\r\n                {!isCollapsed && (\r\n                    <span className=\"text-[11px] font-black uppercase tracking-[0.2em] text-primary pl-1 animate-in fade-in duration-300\">\r\n                        QPilot System\r\n                    </span>\r\n                )}\r\n                <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={toggleSidebar}\r\n                    className={cn(\r\n                        \"h-8 w-8 text-muted-foreground hover:text-primary hover:bg-primary/10 transition-colors\",\r\n                        isCollapsed && \"mx-auto\"\r\n                    )}\r\n                >\r\n                    {isCollapsed ? <ChevronRight className=\"h-4 w-4\" /> : <ChevronLeft className=\"h-4 w-4\" />}\r\n                </Button>\r\n            </SidebarHeader>\r\n\r\n            <SidebarContent>\r\n                <SidebarGroup>\r\n                    {!isCollapsed && (\r\n                        <SidebarGroupLabel className=\"px-4 py-4 text-[10px] font-bold uppercase tracking-[0.2em] text-muted-foreground/50 animate-in fade-in duration-500\">\r\n                            Control Center\r\n                        </SidebarGroupLabel>\r\n                    )}\r\n                    <SidebarGroupContent>\r\n                        <SidebarMenu className={cn(\"px-3 space-y-2\", isCollapsed && \"px-2\")}>\r\n                            {NAV_ITEMS.map((item) => {\r\n                                const isActive = item.title === \"QPilot\"\r\n                                    ? pathname?.startsWith(\"/qpilot\")\r\n                                    : pathname === item.href;\r\n\r\n                                return (\r\n                                    <SidebarMenuItem key={item.title}>\r\n                                        <SidebarMenuButton\r\n                                            asChild\r\n                                            isActive={isActive}\r\n                                            tooltip={item.title}\r\n                                            className={cn(\r\n                                                \"transition-all duration-300 h-10 rounded-xl group relative\",\r\n                                                isActive\r\n                                                    ? \"bg-primary text-primary-foreground shadow-lg shadow-primary/20\"\r\n                                                    : \"text-muted-foreground hover:bg-muted hover:text-primary\",\r\n                                                isCollapsed ? \"justify-center px-0\" : \"px-3\"\r\n                                            )}\r\n                                        >\r\n                                            <Link href={item.href} className=\"flex items-center gap-3\">\r\n                                                <item.icon className={cn(\r\n                                                    \"h-4 w-4 transition-transform group-hover:scale-110\",\r\n                                                    isActive ? \"text-primary-foreground\" : \"text-muted-foreground/70 group-hover:text-primary\"\r\n                                                )} />\r\n                                                {!isCollapsed && (\r\n                                                    <span className=\"text-[13px] font-bold\">{item.title}</span>\r\n                                                )}\r\n                                                {isActive && !isCollapsed && (\r\n                                                    <div className=\"ml-auto w-1 h-3 bg-primary-foreground/40 rounded-full\" />\r\n                                                )}\r\n                                            </Link>\r\n                                        </SidebarMenuButton>\r\n                                    </SidebarMenuItem>\r\n                                );\r\n                            })}\r\n                        </SidebarMenu>\r\n                    </SidebarGroupContent>\r\n                </SidebarGroup>\r\n            </SidebarContent>\r\n        </Sidebar>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\SyllabusAgentCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardFooter' is defined but never used.","line":17,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CardFooter"},"fix":{"range":[475,492],"text":""},"desc":"Remove unused variable \"CardFooter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Input' is defined but never used.","line":20,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Input"},"fix":{"range":[576,624],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used.","line":23,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Separator"},"fix":{"range":[726,782],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getSyllabusStatus' is defined but never used.","line":35,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"getSyllabusStatus"},"fix":{"range":[1054,1073],"text":""},"desc":"Remove unused variable \"getSyllabusStatus\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeAgentIndex' is assigned a value but never used.","line":59,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1789,1792],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1789,1792],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleStart'. Either include it or remove the dependency array.","line":81,"column":8,"nodeType":"ArrayExpression","endLine":81,"endColumn":50,"suggestions":[{"desc":"Update the dependencies array to be: [fileName, textContent, activeTab, status, handleStart]","fix":{"range":[2323,2365],"text":"[fileName, textContent, activeTab, status, handleStart]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'response' is assigned a value but never used.","line":124,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":161,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":161,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5541,5544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5541,5544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/qpilot/SyllabusAgentCard.tsx\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Compact card for the Syllabus Fetcher Agent.\r\n * Handles PDF upload, text paste, and subprocess visualization.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardHeader,\r\n    CardTitle,\r\n    CardFooter\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n    FileUp,\r\n    Type,\r\n    Play,\r\n    Loader2,\r\n    CheckCircle2,\r\n    AlertCircle,\r\n    FileText\r\n} from \"lucide-react\";\r\nimport { useSyllabusStore } from \"@/store/syllabusStore\";\r\nimport { useQPilotStore } from \"@/store/qpilotStore\";\r\nimport { extractSyllabus, getSyllabusStatus } from \"@/lib/projectApi\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface SyllabusAgentCardProps {\r\n    projectId: string;\r\n}\r\n\r\nexport function SyllabusAgentCard({ projectId }: SyllabusAgentCardProps) {\r\n    const {\r\n        fileName,\r\n        textContent,\r\n        setFileName,\r\n        setTextContent,\r\n        updateStep,\r\n        error,\r\n        setError,\r\n        steps\r\n    } = useSyllabusStore();\r\n\r\n    const {\r\n        agentStatuses,\r\n        setAgentStatus,\r\n        emitMessage,\r\n        setActiveAgentIndex,\r\n        activeAgentIndex,\r\n        triggerNextAgent\r\n    } = useQPilotStore();\r\n\r\n    const status = agentStatuses.syllabus;\r\n\r\n    const [activeTab, setActiveTab] = useState<\"pdf\" | \"text\" | any>(\"pdf\");\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const pollingRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (textContent.length > 50 && !fileName) {\r\n            setActiveTab(\"text\");\r\n        }\r\n    }, [textContent, fileName]);\r\n\r\n    // Auto-trigger when data is available\r\n    useEffect(() => {\r\n        const hasData = activeTab === \"pdf\" ? fileName : textContent.length > 50;\r\n        if (hasData && status === \"idle\") {\r\n            handleStart();\r\n        }\r\n    }, [fileName, textContent, activeTab, status]);\r\n\r\n    // Clean up polling on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            if (pollingRef.current) clearInterval(pollingRef.current);\r\n        };\r\n    }, []);\r\n\r\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            if (file.type !== \"application/pdf\") {\r\n                setError(\"Please upload a PDF file.\");\r\n                return;\r\n            }\r\n            setFileName(file.name);\r\n            setError(null);\r\n        }\r\n    };\r\n\r\n    const handleStart = async () => {\r\n        if (status === \"running\" || status === \"completed\") return;\r\n\r\n        if (activeTab === \"pdf\" && !fileName) {\r\n            setError(\"Please select a PDF file first.\");\r\n            return;\r\n        }\r\n        if (activeTab === \"text\" && !textContent.trim()) {\r\n            setError(\"Please paste some syllabus content.\");\r\n            return;\r\n        }\r\n\r\n        setAgentStatus(\"syllabus\", \"running\");\r\n        setError(null);\r\n        setActiveAgentIndex(0);\r\n\r\n        // Orchestrator Logs\r\n        emitMessage(\"Orchestrator\", \"orchestrator\", \"Initializing Syllabus Agent pipeline...\");\r\n        emitMessage(\"Syllabus Agent\", \"agent\", `Starting extraction from ${activeTab === 'pdf' ? 'PDF' : 'manuscript'}...`); // Changed \"file\" to \"pdf\"\r\n\r\n        try {\r\n            // Trigger API\r\n            const response = await extractSyllabus({\r\n                projectId,\r\n                sourceType: activeTab,\r\n                content: activeTab === \"text\" ? textContent : undefined,\r\n            });\r\n\r\n            // Start Polling\r\n            let stepCounter = 0;\r\n            pollingRef.current = setInterval(async () => {\r\n                // In real integration, we'd call getSyllabusStatus(response.jobId)\r\n                // Here we simulate the progression locally for the demonstration\r\n                stepCounter++;\r\n\r\n                if (stepCounter <= steps.length) {\r\n                    // Mark previous as completed\r\n                    if (stepCounter > 1) {\r\n                        updateStep(stepCounter - 2, \"completed\");\r\n                    }\r\n                    // Mark current as running\r\n                    if (stepCounter < steps.length + 1) {\r\n                        updateStep(stepCounter - 1, \"running\");\r\n                        // Emit subprocess chat updates\r\n                        emitMessage(\"Syllabus Agent\", \"agent\", `${steps[stepCounter - 1].label} in progress...`);\r\n                    }\r\n                }\r\n\r\n                if (stepCounter === steps.length + 1) {\r\n                    updateStep(steps.length - 1, \"completed\");\r\n                    setAgentStatus(\"syllabus\", \"completed\");\r\n                    emitMessage(\"Syllabus Agent\", \"agent\", \"Syllabus extraction finalized. Knowledge base updated.\");\r\n                    emitMessage(\"Orchestrator\", \"orchestrator\", \"Syllabus complete. Transitioning to PYQ Agent...\");\r\n                    triggerNextAgent();\r\n\r\n                    if (pollingRef.current) clearInterval(pollingRef.current);\r\n                }\r\n            }, 2000);\r\n\r\n        } catch (err: any) {\r\n            setError(err?.message || \"Extraction failed.\");\r\n            setAgentStatus(\"syllabus\", \"failed\");\r\n            emitMessage(\"Syllabus Agent\", \"agent\", \"Critical error during extraction. Retrying recommended.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className=\"w-full border-border/60 shadow-md\">\r\n            <CardHeader className=\"pb-3 px-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <CardTitle className=\"text-sm font-bold flex items-center gap-2\">\r\n                        <div className=\"p-1.5 rounded-md bg-primary/10 text-primary\">\r\n                            <FileText className=\"h-4 w-4\" />\r\n                        </div>\r\n                        Syllabus Fetcher Agent\r\n                    </CardTitle>\r\n                    {status === \"completed\" && (\r\n                        <Badge className=\"bg-green-500/10 text-green-600 border-green-200 text-[10px] h-5\">\r\n                            Success\r\n                        </Badge>\r\n                    )}\r\n                </div>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"px-4 pb-4 space-y-4\">\r\n                {status === \"idle\" ? (\r\n                    <div className=\"space-y-4 animate-in fade-in duration-300\">\r\n                        {/* Input Selection */}\r\n                        <div className=\"flex gap-1 p-1 bg-muted/50 rounded-lg\">\r\n                            <Button\r\n                                variant={activeTab === \"pdf\" ? \"secondary\" : \"ghost\"}\r\n                                size=\"sm\"\r\n                                className=\"flex-1 text-xs h-8 font-bold\"\r\n                                onClick={() => setActiveTab(\"pdf\")}\r\n                            >\r\n                                <FileUp className=\"h-3.5 w-3.5 mr-2\" />\r\n                                PDF Upload\r\n                            </Button>\r\n                            <Button\r\n                                variant={activeTab === \"text\" ? \"secondary\" : \"ghost\"}\r\n                                size=\"sm\"\r\n                                className=\"flex-1 text-xs h-8 font-bold\"\r\n                                onClick={() => setActiveTab(\"text\")}\r\n                            >\r\n                                <Type className=\"h-3.5 w-3.5 mr-2\" />\r\n                                Text Paste\r\n                            </Button>\r\n                        </div>\r\n\r\n                        {activeTab === \"pdf\" ? (\r\n                            <div className=\"space-y-2\">\r\n                                <input\r\n                                    type=\"file\"\r\n                                    accept=\".pdf\"\r\n                                    className=\"hidden\"\r\n                                    ref={fileInputRef}\r\n                                    onChange={handleFileChange}\r\n                                />\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    className=\"w-full h-16 border-dashed flex flex-col gap-1 hover:bg-primary/5 hover:border-primary/50\"\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                >\r\n                                    <FileUp className=\"h-4 w-4 text-muted-foreground\" />\r\n                                    <span className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-tight\">\r\n                                        {fileName || \"Syllabus PDF\"}\r\n                                    </span>\r\n                                </Button>\r\n                            </div>\r\n                        ) : (\r\n                            <Textarea\r\n                                placeholder=\"Paste syllabus content here...\"\r\n                                className=\"text-[11px] min-h-[90px] resize-none focus:ring-1\"\r\n                                value={textContent}\r\n                                onChange={(e) => setTextContent(e.target.value)}\r\n                            />\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-4 py-2 animate-in fade-in duration-400\">\r\n                        <div className=\"space-y-2.5\">\r\n                            {steps.map((step, idx) => {\r\n                                const isActive = step.status === \"running\";\r\n                                const isDone = step.status === \"completed\";\r\n                                const isFail = step.status === \"failed\";\r\n\r\n                                return (\r\n                                    <div key={idx} className=\"flex items-center gap-3 px-1\">\r\n                                        <div className={cn(\r\n                                            \"h-1.5 w-1.5 rounded-full transition-all duration-300\",\r\n                                            isActive ? \"bg-blue-500 animate-pulse ring-4 ring-blue-500/20\" : \"bg-muted-foreground/30\",\r\n                                            isDone ? \"bg-green-500\" : \"\",\r\n                                            isFail ? \"bg-red-500\" : \"\"\r\n                                        )} />\r\n                                        <span className={cn(\r\n                                            \"text-[10px] font-bold uppercase tracking-widest transition-colors\",\r\n                                            isActive ? \"text-blue-600\" : \"text-muted-foreground/60\",\r\n                                            isDone ? \"text-green-600/70\" : \"\"\r\n                                        )}>\r\n                                            {step.label}\r\n                                        </span>\r\n                                        {isActive && <Loader2 className=\"h-3 w-3 animate-spin text-blue-500 ml-auto\" />}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {error && (\r\n                    <div className=\"flex items-center gap-2 text-[10px] font-bold text-destructive bg-destructive/5 p-2 rounded border border-destructive/20 uppercase tracking-tight\">\r\n                        <AlertCircle className=\"h-3 w-3\" />\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <Button\r\n                    className={cn(\r\n                        \"w-full h-10 font-black text-[11px] uppercase tracking-[0.15em] transition-all\",\r\n                        status === \"running\" || status === \"completed\" ? \"bg-green-600 hover:bg-green-700 disabled:opacity-100\" : \"bg-primary\"\r\n                    )}\r\n                    onClick={handleStart}\r\n                    disabled={status === \"running\" || status === \"completed\"}\r\n                >\r\n                    {status === \"running\" ? (\r\n                        <>\r\n                            <Loader2 className=\"h-3.5 w-3.5 mr-2 animate-spin\" />\r\n                            Extracting...\r\n                        </>\r\n                    ) : status === \"completed\" ? (\r\n                        <>\r\n                            <CheckCircle2 className=\"h-3.5 w-3.5 mr-2\" />\r\n                            Completed\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Play className=\"h-3 w-3 mr-2\" />\r\n                            Start Extraction\r\n                        </>\r\n                    )}\r\n                </Button>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\TeacherInputAgentCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":25,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Sparkles"},"fix":{"range":[787,802],"text":""},"desc":"Remove unused variable \"Sparkles\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateAgent' is assigned a value but never used.","line":58,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeAgentIndex' is assigned a value but never used.","line":59,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3850,3853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3850,3853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * components/qpilot/TeacherInputAgentCard.tsx\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Final input agent. Allows teachers to provide custom instructions.\r\n * Acts as the master trigger for the full generation lifecycle.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useRef, useEffect } from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardHeader,\r\n    CardTitle,\r\n    CardDescription\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport {\r\n    MessageSquareQuote,\r\n    Sparkles,\r\n    Loader2,\r\n    CheckCircle2,\r\n    AlertCircle,\r\n    Zap,\r\n    Info\r\n} from \"lucide-react\";\r\nimport { useGenerationStore } from \"@/store/generationStore\";\r\nimport { usePatternStore } from \"@/store/patternStore\";\r\nimport { useBloomStore } from \"@/store/bloomStore\";\r\nimport { useQPilotStore } from \"@/store/qpilotStore\";\r\nimport { triggerFinalGeneration } from \"@/lib/projectApi\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface TeacherInputAgentCardProps {\r\n    projectId: string;\r\n}\r\n\r\nexport function TeacherInputAgentCard({ projectId }: TeacherInputAgentCardProps) {\r\n    const {\r\n        teacherInput,\r\n        steps,\r\n        setTeacherInput,\r\n        updateStep,\r\n        setError,\r\n        error\r\n    } = useGenerationStore();\r\n\r\n    const {\r\n        agentStatuses,\r\n        setAgentStatus,\r\n        emitMessage,\r\n        setActiveAgentIndex,\r\n        updateAgent,\r\n        activeAgentIndex\r\n    } = useQPilotStore();\r\n\r\n    const status = agentStatuses.generation;\r\n\r\n    const { getTotalAllocated, totalMarks: targetMarks } = usePatternStore();\r\n    const { getTotalAssigned } = useBloomStore();\r\n\r\n    const pollingRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    const totalAllocatedMarks = getTotalAllocated();\r\n    const totalBloomQuestions = getTotalAssigned();\r\n\r\n    // Validations\r\n    const isPatternValid = totalAllocatedMarks === targetMarks;\r\n    const isBloomValid = totalBloomQuestions > 0;\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (pollingRef.current) clearInterval(pollingRef.current);\r\n        };\r\n    }, []);\r\n\r\n    const handleGenerate = async () => {\r\n        if (status === \"running\" || status === \"completed\") return;\r\n\r\n        if (!isPatternValid || !isBloomValid) {\r\n            setError(\"Please complete all required agent steps first.\");\r\n            return;\r\n        }\r\n\r\n        setAgentStatus(\"generation\", \"running\");\r\n        setError(null);\r\n        setActiveAgentIndex(4);\r\n\r\n        // Chat Behavior\r\n        if (teacherInput.trim()) {\r\n            emitMessage(\"Teacher\", \"teacher\", teacherInput);\r\n        }\r\n        emitMessage(\"Orchestrator\", \"orchestrator\", \"Initiating final generation...\");\r\n\r\n        try {\r\n            await triggerFinalGeneration({\r\n                projectId,\r\n                teacherInput\r\n            });\r\n\r\n            let stepIdx = 0;\r\n            pollingRef.current = setInterval(() => {\r\n                stepIdx++;\r\n                if (stepIdx <= steps.length) {\r\n                    if (stepIdx > 1) updateStep(stepIdx - 2, \"completed\");\r\n                    updateStep(stepIdx - 1, \"running\");\r\n                }\r\n                if (stepIdx === steps.length + 1) {\r\n                    updateStep(steps.length - 1, \"completed\");\r\n                    setAgentStatus(\"generation\", \"completed\");\r\n\r\n                    emitMessage(\"Generation Agent\", \"agent\", \"Generating question paper...\");\r\n\r\n                    if (pollingRef.current) clearInterval(pollingRef.current);\r\n                }\r\n            }, 1800);\r\n\r\n        } catch (err: any) {\r\n            setError(err?.message || \"Generation trigger failed.\");\r\n            setAgentStatus(\"generation\", \"failed\");\r\n            emitMessage(\"Teacher Input Agent\", \"agent\", \"Pipeline synthesis failed. System state preserved.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className=\"w-full border-border/60 shadow-lg overflow-hidden\">\r\n            <CardHeader className=\"pb-3 px-4 bg-primary/5\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"space-y-0.5\">\r\n                        <CardTitle className=\"text-sm font-bold flex items-center gap-2\">\r\n                            <div className=\"p-1.5 rounded-md bg-primary text-primary-foreground\">\r\n                                <MessageSquareQuote className=\"h-4 w-4\" />\r\n                            </div>\r\n                            Teacher Input Agent\r\n                        </CardTitle>\r\n                        <CardDescription className=\"text-[10px] uppercase font-bold tracking-tight text-muted-foreground/60\">\r\n                            Custom Instructions & Requirements\r\n                        </CardDescription>\r\n                    </div>\r\n                    {status === \"completed\" && (\r\n                        <Badge className=\"bg-emerald-500/10 text-emerald-600 border-emerald-200 text-[10px] h-5 font-bold\">\r\n                            Ready\r\n                        </Badge>\r\n                    )}\r\n                </div>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"px-4 pb-5 pt-4 space-y-4\">\r\n                <div className=\"space-y-4 animate-in fade-in duration-300\">\r\n                    <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center gap-2 mb-1\">\r\n                            <Info className=\"h-3 w-3 text-muted-foreground\" />\r\n                            <span className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest\">Special Instructions</span>\r\n                        </div>\r\n                        <Textarea\r\n                            placeholder=\"Focus more on calculus, avoid repetition from PYQs, add internal choice in Section B, or include at least 2 HOTS questions...\"\r\n                            disabled={status === \"running\"}\r\n                            className=\"text-[11px] min-h-[120px] leading-relaxed resize-y focus:ring-1 bg-muted/10 border-border/40\"\r\n                            value={teacherInput}\r\n                            onChange={(e) => setTeacherInput(e.target.value)}\r\n                        />\r\n                        <div className=\"flex justify-end\">\r\n                            <span className=\"text-[9px] text-muted-foreground font-medium\">{teacherInput.length} characters</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div className=\"p-2.5 bg-destructive/5 rounded-lg border border-destructive/20 flex items-start gap-2 animate-in shake-in\">\r\n                            <AlertCircle className=\"h-4 w-4 text-destructive shrink-0 mt-0.5\" />\r\n                            <p className=\"text-[10px] font-bold text-destructive leading-tight\">{error}</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    <Separator className=\"opacity-40\" />\r\n\r\n                    <div className=\"space-y-3\">\r\n                        <div className=\"p-3 bg-muted/30 rounded-lg border border-border/40 space-y-2\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <span className=\"text-[10px] font-bold text-muted-foreground uppercase\">Pattern Integrity</span>\r\n                                <Badge variant={isPatternValid ? \"secondary\" : \"outline\"} className={cn(\"text-[9px] h-4\", isPatternValid ? \"bg-emerald-50 text-emerald-600 border-emerald-100\" : \"text-amber-500 border-amber-100\")}>\r\n                                    {isPatternValid ? \"Validated\" : \"Required\"}\r\n                                </Badge>\r\n                            </div>\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <span className=\"text-[10px] font-bold text-muted-foreground uppercase\">Bloom Distribution</span>\r\n                                <Badge variant={isBloomValid ? \"secondary\" : \"outline\"} className={cn(\"text-[9px] h-4\", isBloomValid ? \"bg-emerald-50 text-emerald-600 border-emerald-100\" : \"text-amber-500 border-amber-100\")}>\r\n                                    {isBloomValid ? \"Validated\" : \"Required\"}\r\n                                </Badge>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <Button\r\n                            onClick={handleGenerate}\r\n                            className={cn(\r\n                                \"w-full h-11 font-black text-[12px] uppercase tracking-widest transition-all shadow-xl\",\r\n                                status === \"completed\" || status === \"running\" ? \"bg-green-600 hover:bg-green-700\" : \"bg-primary hover:bg-primary/90 shadow-primary/20\"\r\n                            )}\r\n                            disabled={status === \"running\"}\r\n                        >\r\n                            {status === \"running\" ? (\r\n                                <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\r\n                            ) : status === \"completed\" ? (\r\n                                <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                            ) : (\r\n                                <Zap className=\"h-4 w-4 mr-2\" />\r\n                            )}\r\n                            {status === \"running\" ? \"Initiating AI Synthesis...\" : status === \"completed\" ? \"Paper Generated\" : \"Generate Question Paper\"}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\qpilot\\VerticalProgressBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\navigation-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\sidebar.tsx:611:26\n  609 |   // Random width between 50 to 90%.\n  610 |   const width = React.useMemo(() => {\n> 611 |     return `${Math.floor(Math.random() * 40) + 50}%`\n      |                          ^^^^^^^^^^^^^ Cannot call impure function\n  612 |   }, [])\n  613 |\n  614 |   return (","line":611,"column":26,"nodeType":null,"endLine":611,"endColumn":39}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\nimport * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\nimport { Slot } from \"radix-ui\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon)\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]\"\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"size-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot.Root : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot.Root : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot.Root : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot.Root : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-(--skeleton-width) flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot.Root : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\hooks\\use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\hooks\\useProcessing.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[294,304],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3096,3099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3096,3099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * hooks/useProcessing.ts\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Hook to manage the interaction between the generation API and WebSocket logs.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useEffect, useRef, useCallback } from \"react\";\r\nimport { useProcessingStore } from \"@/store/processingStore\";\r\nimport { generatePaper } from \"@/lib/projectApi\";\r\nimport type { PaperGenerationRequest } from \"@/types/api\";\r\n\r\nexport function useProcessing(projectId: string, requestData: PaperGenerationRequest | null) {\r\n    const {\r\n        startProcessing,\r\n        updateStep,\r\n        addLog,\r\n        setProgress,\r\n        setResult,\r\n        setError,\r\n        status\r\n    } = useProcessingStore();\r\n\r\n    const wsRef = useRef<WebSocket | null>(null);\r\n\r\n    const connectWebSocket = useCallback((sessionId: string) => {\r\n        const wsUrl = `${process.env.NEXT_PUBLIC_WS_BASE_URL}/ws/${sessionId}`;\r\n        const ws = new WebSocket(wsUrl);\r\n\r\n        ws.onopen = () => {\r\n            console.log(\"WebSocket connected for session:\", sessionId);\r\n        };\r\n\r\n        ws.onmessage = (event) => {\r\n            const data = event.data as string;\r\n            addLog(data);\r\n\r\n            // Parse step updates if they match the backend pattern: \"Step X: name\"\r\n            const stepMatch = data.match(/Step (\\d+):/i);\r\n            if (stepMatch) {\r\n                const stepNum = stepMatch[1];\r\n                // Mark previous steps as completed\r\n                for (let i = 1; i < parseInt(stepNum); i++) {\r\n                    updateStep(i.toString(), \"completed\");\r\n                }\r\n                // Mark current step as running\r\n                updateStep(stepNum, \"running\");\r\n\r\n                // Update progress based on step number (9 steps total)\r\n                const progress = Math.round((parseInt(stepNum) / 9) * 100);\r\n                setProgress(progress);\r\n            }\r\n        };\r\n\r\n        ws.onerror = (err) => {\r\n            console.error(\"WebSocket error:\", err);\r\n        };\r\n\r\n        wsRef.current = ws;\r\n        return ws;\r\n    }, [addLog, updateStep, setProgress]);\r\n\r\n    const runGeneration = useCallback(async () => {\r\n        if (!requestData || status !== \"idle\") return;\r\n\r\n        startProcessing();\r\n\r\n        // session_1 is used in backend main.py example, but we'll use a unique one if we can.\r\n        // However, the current backend main.py hardcodes session_1.\r\n        const sessionId = \"session_1\";\r\n\r\n        const ws = connectWebSocket(sessionId);\r\n\r\n        try {\r\n            const response = await generatePaper(requestData);\r\n\r\n            if (response.status === \"success\") {\r\n                // Mark all steps as completed before finishing\r\n                for (let i = 1; i <= 9; i++) {\r\n                    updateStep(i.toString(), \"completed\");\r\n                }\r\n                setResult(response.file_path);\r\n            } else {\r\n                setError(\"Generation failed on backend.\");\r\n            }\r\n        } catch (err: any) {\r\n            setError(err?.message || \"Failed to trigger generation.\");\r\n        } finally {\r\n            if (ws.readyState === WebSocket.OPEN) {\r\n                // Optional: wait a bit before closing to ensure logs arrive\r\n                setTimeout(() => ws.close(), 1000);\r\n            }\r\n        }\r\n    }, [requestData, status, startProcessing, connectWebSocket, updateStep, setResult, setError]);\r\n\r\n    return { runGeneration };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\hooks\\useQPilotInterface.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":115,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":115,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4545,4548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4545,4548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\n/**\r\n * hooks/useQPilotInterface.ts\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Orchestrates the QPilot Live Interface:\r\n * 1. Triggers generation API\r\n * 2. Manages WebSocket status updates\r\n * 3. Updates the QPilot store (agents progress, vertical bar, paper content)\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { useRef, useCallback } from \"react\";\r\nimport { useQPilotStore } from \"@/store/qpilotStore\";\r\nimport { generatePaper } from \"@/lib/projectApi\";\r\nimport type { PaperGenerationRequest } from \"@/types/api\";\r\n\r\nexport function useQPilotInterface(projectId: string, requestData: PaperGenerationRequest | null) {\r\n    const {\r\n        setStatus,\r\n        updateAgent,\r\n        setActiveAgentIndex,\r\n        addQuestion,\r\n        status,\r\n        agents\r\n    } = useQPilotStore();\r\n\r\n    const wsRef = useRef<WebSocket | null>(null);\r\n\r\n    const connectWebSocket = useCallback((sessionId: string) => {\r\n        const wsUrl = `${process.env.NEXT_PUBLIC_WS_BASE_URL}/ws/${sessionId}`;\r\n        const ws = new WebSocket(wsUrl);\r\n\r\n        ws.onmessage = (event) => {\r\n            const data = event.data as string;\r\n\r\n            // --- PIPELINE STATUS MAPPING ---\r\n            // Pattern: \"Step X: Name\"\r\n            const stepMatch = data.match(/Step (\\d+):/i);\r\n            if (stepMatch) {\r\n                const stepNum = parseInt(stepMatch[1]);\r\n\r\n                // Map backend 9-step pipeline to frontend 5-step pipeline\r\n                let mappedIndex = 0;\r\n                if (stepNum === 1 || stepNum === 2) mappedIndex = 0; // Syllabus Agent\r\n                else if (stepNum === 3 || stepNum === 4) mappedIndex = 1; // PYQ Agent\r\n                else if (stepNum === 5) mappedIndex = 2; // Blooxanomy Agent\r\n                else if (stepNum === 6) mappedIndex = 3; // Paper Pattern Agent\r\n                else if (stepNum >= 7) mappedIndex = 4; // Teacher Input Agent\r\n\r\n                // Complete previous agents\r\n                for (let i = 0; i < mappedIndex; i++) {\r\n                    updateAgent(i, { status: \"completed\", progress: 100 });\r\n                }\r\n\r\n                // Start current agent\r\n                setActiveAgentIndex(mappedIndex);\r\n                updateAgent(mappedIndex, {\r\n                    status: \"running\",\r\n                    progress: (stepNum % 2 === 0 && stepNum < 5) ? 80 : 30\r\n                });\r\n            }\r\n\r\n            // Progress Simulation within an agent\r\n            if (data.includes(\"Blueprint Build\")) {\r\n                updateAgent(2, { progress: 60 });\r\n            }\r\n\r\n            // Incremental content generation (Previously agent 4, now also agent 4 but for gen content)\r\n            if (data.includes(\"Select Questions\")) {\r\n                updateAgent(4, { progress: 80 });\r\n                setTimeout(() => {\r\n                    addQuestion(\"Section A: Objectives\", {\r\n                        number: 1,\r\n                        text: \"Identify the primary benefit of multi-agent collaboration in AI workflows.\",\r\n                        marks: 1\r\n                    });\r\n                }, 1000);\r\n            }\r\n\r\n            if (data.includes(\"generate final\")) {\r\n                updateAgent(4, { progress: 95 }); // Still updating Teacher Input since it's the last trigger card\r\n                addQuestion(\"Section B: Subjective\", {\r\n                    number: 2,\r\n                    text: \"Design a fail-safe mechanism for an autonomous grading agent.\",\r\n                    marks: 5\r\n                });\r\n            }\r\n        };\r\n\r\n        wsRef.current = ws;\r\n        return ws;\r\n    }, [updateAgent, setActiveAgentIndex, addQuestion]);\r\n\r\n    const runGeneration = useCallback(async () => {\r\n        if (!requestData || status !== \"idle\") return;\r\n\r\n        setStatus(\"running\");\r\n\r\n        // In production, session ID would be project specific\r\n        const sessionId = \"session_1\";\r\n        const ws = connectWebSocket(sessionId);\r\n\r\n        try {\r\n            const response = await generatePaper(requestData);\r\n\r\n            if (response.status === \"success\") {\r\n                // Finalize all agents\r\n                agents.forEach((_, idx) => updateAgent(idx, { status: \"completed\", progress: 100 }));\r\n                setActiveAgentIndex(agents.length - 1); // Set to last agent\r\n                setStatus(\"completed\");\r\n            } else {\r\n                setStatus(\"failed\");\r\n            }\r\n        } catch (err: any) {\r\n            setStatus(\"failed\");\r\n        } finally {\r\n            if (ws.readyState === WebSocket.OPEN) {\r\n                setTimeout(() => ws.close(), 2000);\r\n            }\r\n        }\r\n    }, [requestData, status, setStatus, connectWebSocket, updateAgent, setActiveAgentIndex, agents]);\r\n\r\n    return { runGeneration };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\lib\\apiClient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\lib\\dashboardApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\lib\\projectApi.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is defined but never used.","line":359,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":359,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * lib/projectApi.ts\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * API helpers for Project and Section CRUD.\r\n *\r\n * INTEGRATION GUIDE STATUS:\r\n *   The FRONTEND_INTEGRATION_GUIDE.md defines only TWO backend endpoints:\r\n *     • POST /generate-paper   (paper generation)\r\n *     • WS   /ws/{session_id}  (real-time logs)\r\n *\r\n *   No Project or Section CRUD routes are defined in the guide.\r\n *\r\n *   This module implements those operations using localStorage so the Builder\r\n *   page is fully functional today inhabitants. The data shapes are designed to be 1:1\r\n *   compatible with a REST API. To connect a real backend:\r\n *\r\n *   1. Replace each stub function body with an apiFetch() call.\r\n *   2. The ONLY real backend call on this page is generatePaper().\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { apiFetch } from \"@/lib/apiClient\";\r\nimport type {\r\n    Project,\r\n    Section,\r\n    CreateSectionPayload,\r\n    UpdateSectionPayload,\r\n    UpdateProjectPayload,\r\n    PaperGenerationRequest,\r\n    PaperGenerationResponse,\r\n} from \"@/types/api\";\r\n\r\nconst LS_PROJECTS_KEY = \"qpilot_projects_v2\"; // Versioned to avoid old data conflicts\r\nconst LS_SECTIONS_KEY = \"qpilot_sections_v2\";\r\n\r\nconst DEFAULT_SETTINGS = {\r\n    includeAnswerKey: true,\r\n    shuffleQuestions: false,\r\n    negativeMarking: false,\r\n    difficultyDistribution: [30, 40, 30],\r\n};\r\n\r\nfunction readProjects(): Project[] {\r\n    try {\r\n        const raw = localStorage.getItem(LS_PROJECTS_KEY);\r\n        return raw ? (JSON.parse(raw) as Project[]) : seedProjects();\r\n    } catch {\r\n        return seedProjects();\r\n    }\r\n}\r\n\r\nfunction writeProjects(projects: Project[]): void {\r\n    localStorage.setItem(LS_PROJECTS_KEY, JSON.stringify(projects));\r\n}\r\n\r\nfunction readSections(): Section[] {\r\n    try {\r\n        const raw = localStorage.getItem(LS_SECTIONS_KEY);\r\n        return raw ? (JSON.parse(raw) as Section[]) : seedSections();\r\n    } catch {\r\n        return seedSections();\r\n    }\r\n}\r\n\r\nfunction writeSections(sections: Section[]): void {\r\n    localStorage.setItem(LS_SECTIONS_KEY, JSON.stringify(sections));\r\n}\r\n\r\nfunction now(): string {\r\n    return new Date().toISOString();\r\n}\r\n\r\nfunction uuid(): string {\r\n    return crypto.randomUUID();\r\n}\r\n\r\nfunction seedProjects(): Project[] {\r\n    const projects: Project[] = [\r\n        {\r\n            id: \"proj-demo-1\",\r\n            name: \"Terminal Exam 2026\",\r\n            subject: \"Mathematics\",\r\n            grade: \"10\",\r\n            board: \"CBSE\",\r\n            paperType: \"cbse\",\r\n            totalMarks: 80,\r\n            duration: \"3 Hours\",\r\n            instructions: \"All questions are compulsory.\\nUse of calculator is not allowed.\",\r\n            status: \"draft\",\r\n            settings: DEFAULT_SETTINGS,\r\n            createdAt: now(),\r\n            updatedAt: now(),\r\n        },\r\n    ];\r\n    writeProjects(projects);\r\n    return projects;\r\n}\r\n\r\nfunction seedSections(): Section[] {\r\n    const sections: Section[] = [\r\n        {\r\n            id: \"sec-1\",\r\n            projectId: \"proj-demo-1\",\r\n            name: \"Section A: Multiple Choice\",\r\n            type: \"mcq\",\r\n            numQuestions: 20,\r\n            marksPerQuestion: 1,\r\n            totalMarks: 20,\r\n            difficulty: \"easy\",\r\n            order: 1,\r\n        },\r\n        {\r\n            id: \"sec-2\",\r\n            projectId: \"proj-demo-1\",\r\n            name: \"Section B: Short Answer\",\r\n            type: \"short_answer\",\r\n            numQuestions: 10,\r\n            marksPerQuestion: 2,\r\n            totalMarks: 20,\r\n            difficulty: \"medium\",\r\n            order: 2,\r\n        },\r\n        {\r\n            id: \"sec-3\",\r\n            projectId: \"proj-demo-1\",\r\n            name: \"Section C: Long Answer\",\r\n            type: \"long_answer\",\r\n            numQuestions: 8,\r\n            marksPerQuestion: 5,\r\n            totalMarks: 40,\r\n            difficulty: \"hard\",\r\n            order: 3,\r\n        },\r\n    ];\r\n    writeSections(sections);\r\n    return sections;\r\n}\r\n\r\nconst delay = (ms = 500) => new Promise((r) => setTimeout(r, ms));\r\n\r\nexport async function getProject(id: string): Promise<Project> {\r\n    await delay(600);\r\n    const project = readProjects().find((p) => p.id === id);\r\n    if (!project) throw new Error(`Project \"${id}\" not found.`);\r\n    return { ...project };\r\n}\r\n\r\nexport async function updateProject(\r\n    id: string,\r\n    payload: UpdateProjectPayload\r\n): Promise<Project> {\r\n    await delay(700);\r\n    const projects = readProjects();\r\n    const idx = projects.findIndex((p) => p.id === id);\r\n    if (idx === -1) throw new Error(`Project \"${id}\" not found.`);\r\n\r\n    // Merge settings carefully if present\r\n    const updatedProject = {\r\n        ...projects[idx],\r\n        ...payload,\r\n        settings: payload.settings ? { ...projects[idx].settings, ...payload.settings } : projects[idx].settings,\r\n        updatedAt: now()\r\n    };\r\n\r\n    projects[idx] = updatedProject;\r\n    writeProjects(projects);\r\n    return { ...projects[idx] };\r\n}\r\n\r\nexport async function getSections(projectId: string): Promise<Section[]> {\r\n    await delay(500);\r\n    return readSections()\r\n        .filter((s) => s.projectId === projectId)\r\n        .sort((a, b) => a.order - b.order);\r\n}\r\n\r\nexport async function addSection(\r\n    projectId: string,\r\n    payload: CreateSectionPayload\r\n): Promise<Section> {\r\n    await delay(600);\r\n    const existing = readSections().filter((s) => s.projectId === projectId);\r\n    const section: Section = {\r\n        id: uuid(),\r\n        projectId,\r\n        name: payload.name,\r\n        type: payload.type,\r\n        numQuestions: payload.numQuestions,\r\n        marksPerQuestion: payload.marksPerQuestion,\r\n        totalMarks: payload.numQuestions * payload.marksPerQuestion, // Compute\r\n        difficulty: payload.difficulty,\r\n        order: payload.order ?? existing.length + 1,\r\n    };\r\n    const all = readSections();\r\n    all.push(section);\r\n    writeSections(all);\r\n    return { ...section };\r\n}\r\n\r\nexport async function updateSection(\r\n    _projectId: string,\r\n    sectionId: string,\r\n    payload: UpdateSectionPayload\r\n): Promise<Section> {\r\n    await delay(600);\r\n    const all = readSections();\r\n    const idx = all.findIndex((s) => s.id === sectionId);\r\n    if (idx === -1) throw new Error(`Section \"${sectionId}\" not found.`);\r\n\r\n    const updated = { ...all[idx], ...payload };\r\n    // Re-calculate totalMarks if qty or marks changed\r\n    updated.totalMarks = updated.numQuestions * updated.marksPerQuestion;\r\n\r\n    all[idx] = updated;\r\n    writeSections(all);\r\n    return { ...all[idx] };\r\n}\r\n\r\nexport async function deleteSection(\r\n    _projectId: string,\r\n    sectionId: string\r\n): Promise<void> {\r\n    await delay(500);\r\n    const all = readSections().filter((s) => s.id !== sectionId);\r\n    writeSections(all);\r\n}\r\n\r\nexport async function generatePaper(\r\n    data: PaperGenerationRequest\r\n): Promise<PaperGenerationResponse> {\r\n    // STRICTLY follow the guide for the payload\r\n    return apiFetch<PaperGenerationResponse>(\"/generate-paper\", {\r\n        method: \"POST\",\r\n        json: data,\r\n    });\r\n}\r\n\r\n/**\r\n * SYLLABUS AGENT ROUTES (Integration Guide Placeholder)\r\n */\r\n\r\nexport interface SyllabusExtractRequest {\r\n    projectId: string;\r\n    sourceType: \"pdf\" | \"text\";\r\n    content?: string;\r\n    file?: File;\r\n}\r\n\r\nexport async function extractSyllabus(data: SyllabusExtractRequest): Promise<{ status: string; jobId: string }> {\r\n    // Integration Placeholder: POST /extract-syllabus\r\n    // For now, simulate a successful trigger\r\n    await delay(1000);\r\n    return { status: \"running\", jobId: `syllabus-job-${data.projectId}` };\r\n}\r\n\r\nexport async function getSyllabusStatus(jobId: string): Promise<{ status: string; currentStep: number }> {\r\n    // Integration Placeholder: GET /syllabus-status/{jobId}\r\n    // Simulate progression for the UI\r\n    return apiFetch<{ status: string; currentStep: number }>(`/syllabus-status/${jobId}`).catch(() => {\r\n        // Fallback for demo if route doesn't exist yet\r\n        return { status: \"running\", currentStep: 1 };\r\n    });\r\n}\r\n\r\n/**\r\n * PYQ AGENT ROUTES (Integration Guide Placeholder)\r\n */\r\n\r\nexport interface PyqExtractRequest {\r\n    projectId: string;\r\n    sourceType: \"pdf\" | \"text\";\r\n    content?: string;\r\n    year?: string;\r\n    board?: string;\r\n    file?: File;\r\n}\r\n\r\nexport async function processPyqs(data: PyqExtractRequest): Promise<{ status: string; jobId: string }> {\r\n    // Integration Placeholder: POST /process-pyqs\r\n    await delay(1000);\r\n    return { status: \"running\", jobId: `pyq-job-${data.projectId}` };\r\n}\r\n\r\nexport async function getPyqStatus(jobId: string): Promise<{ status: string; currentStep: number }> {\r\n    // Integration Placeholder: GET /pyq-status/{jobId}\r\n    return apiFetch<{ status: string; currentStep: number }>(`/pyq-status/${jobId}`).catch(() => {\r\n        return { status: \"running\", currentStep: 1 };\r\n    });\r\n}\r\n\r\n/**\r\n * BLOOXANOMY AGENT ROUTES (Integration Guide Placeholder)\r\n */\r\n\r\nexport interface BloomDistributionRequest {\r\n    projectId: string;\r\n    levels: {\r\n        remember: number;\r\n        understand: number;\r\n        apply: number;\r\n        analyze: number;\r\n        evaluate: number;\r\n        create: number;\r\n    };\r\n}\r\n\r\nexport async function applyBloomDistribution(data: BloomDistributionRequest): Promise<{ status: string; jobId: string }> {\r\n    // Integration Placeholder: POST /apply-bloom\r\n    await delay(1000);\r\n    return { status: \"running\", jobId: `bloom-job-${data.projectId}` };\r\n}\r\n\r\nexport async function getBloomStatus(jobId: string): Promise<{ status: string; currentStep: number }> {\r\n    // Integration Placeholder: GET /bloom-status/{jobId}\r\n    return apiFetch<{ status: string; currentStep: number }>(`/bloom-status/${jobId}`).catch(() => {\r\n        return { status: \"running\", currentStep: 1 };\r\n    });\r\n}\r\n\r\n/**\r\n * PAPER PATTERN AGENT ROUTES (Integration Guide Placeholder)\r\n */\r\n\r\nexport interface PatternSectionInput {\r\n    name: string;\r\n    type: string;\r\n    numQuestions: number;\r\n    marksPerQuestion: number;\r\n}\r\n\r\nexport interface PaperPatternRequest {\r\n    projectId: string;\r\n    sections: PatternSectionInput[];\r\n}\r\n\r\nexport async function applyPaperPattern(data: PaperPatternRequest): Promise<{ status: string; jobId: string }> {\r\n    // Integration Placeholder: POST /apply-pattern\r\n    await delay(1000);\r\n    return { status: \"running\", jobId: `pattern-job-${data.projectId}` };\r\n}\r\n\r\nexport async function getPatternStatus(jobId: string): Promise<{ status: string; currentStep: number }> {\r\n    // Integration Placeholder: GET /pattern-status/{jobId}\r\n    return apiFetch<{ status: string; currentStep: number }>(`/pattern-status/${jobId}`).catch(() => {\r\n        return { status: \"running\", currentStep: 1 };\r\n    });\r\n}\r\n\r\n/**\r\n * TEACHER INPUT & FINAL GENERATION (Integration Guide)\r\n */\r\n\r\nexport interface FinalGenerationRequest {\r\n    projectId: string;\r\n    teacherInput: string;\r\n    // Note: Backend might also need subject/grade/board from the project context\r\n}\r\n\r\nexport async function triggerFinalGeneration(data: FinalGenerationRequest): Promise<{ status: string; file_path: string }> {\r\n    // Integration Placeholder: POST /generate-paper (Final Trigger)\r\n    // According to the guide, this initiates the generation.\r\n    await delay(1000);\r\n    return { status: \"success\", file_path: \"/path/to/generated/paper.pdf\" };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\lib\\themeApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\bloomStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'state' is defined but never used.","line":100,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":100,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * store/bloomStore.ts\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Zustand store for the Blooxanomy (Bloom's Taxonomy) Agent.\r\n * Manages cognitive level distribution and subprocess steps.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { create } from \"zustand\";\r\n\r\nexport type BloomStatus = \"idle\" | \"running\" | \"completed\" | \"failed\";\r\n\r\nexport interface BloomLevels {\r\n    remember: number;\r\n    understand: number;\r\n    apply: number;\r\n    analyze: number;\r\n    evaluate: number;\r\n    create: number;\r\n}\r\n\r\nexport interface SubprocessStep {\r\n    id: number;\r\n    label: string;\r\n    status: \"pending\" | \"running\" | \"completed\" | \"failed\";\r\n}\r\n\r\ninterface BloomState {\r\n    bloomLevels: BloomLevels;\r\n    status: BloomStatus;\r\n    currentStepIndex: number;\r\n    steps: SubprocessStep[];\r\n    error: string | null;\r\n\r\n    // Actions\r\n    setLevel: (level: keyof BloomLevels, value: number) => void;\r\n    setBloomLevels: (levels: BloomLevels) => void;\r\n    setStatus: (status: BloomStatus) => void;\r\n    updateStep: (index: number, status: SubprocessStep[\"status\"]) => void;\r\n    reset: () => void;\r\n    startBloomProcess: () => void;\r\n    setError: (msg: string | null) => void;\r\n    getTotalAssigned: () => number;\r\n}\r\n\r\nconst INITIAL_STEPS: SubprocessStep[] = [\r\n    { id: 0, label: \"Validating Distribution\", status: \"pending\" },\r\n    { id: 1, label: \"Mapping Questions to Levels\", status: \"pending\" },\r\n    { id: 2, label: \"Adjusting Difficulty\", status: \"pending\" },\r\n    { id: 3, label: \"Completed\", status: \"pending\" },\r\n];\r\n\r\nconst INITIAL_LEVELS: BloomLevels = {\r\n    remember: 0,\r\n    understand: 0,\r\n    apply: 0,\r\n    analyze: 0,\r\n    evaluate: 0,\r\n    create: 0,\r\n};\r\n\r\nexport const useBloomStore = create<BloomState>((set, get) => ({\r\n    bloomLevels: INITIAL_LEVELS,\r\n    status: \"idle\",\r\n    currentStepIndex: 0,\r\n    steps: INITIAL_STEPS,\r\n    error: null,\r\n\r\n    setLevel: (level, value) => set((state) => ({\r\n        bloomLevels: { ...state.bloomLevels, [level]: Math.max(0, value) }\r\n    })),\r\n\r\n    setBloomLevels: (bloomLevels) => set({ bloomLevels }),\r\n\r\n    setStatus: (status) => set({ status }),\r\n\r\n    updateStep: (index, status) => set((state) => {\r\n        const newSteps = [...state.steps];\r\n        if (newSteps[index]) {\r\n            newSteps[index] = { ...newSteps[index], status };\r\n        }\r\n        return { steps: newSteps, currentStepIndex: index };\r\n    }),\r\n\r\n    setError: (error) => set({ error }),\r\n\r\n    getTotalAssigned: () => {\r\n        const l = get().bloomLevels;\r\n        return l.remember + l.understand + l.apply + l.analyze + l.evaluate + l.create;\r\n    },\r\n\r\n    reset: () => set({\r\n        bloomLevels: INITIAL_LEVELS,\r\n        status: \"idle\",\r\n        currentStepIndex: 0,\r\n        steps: INITIAL_STEPS,\r\n        error: null\r\n    }),\r\n\r\n    startBloomProcess: () => set((state) => ({\r\n        status: \"running\",\r\n        currentStepIndex: 0,\r\n        steps: INITIAL_STEPS.map((s, i) => i === 0 ? { ...s, status: \"running\" } : s),\r\n        error: null\r\n    })),\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\dashboardStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\generationStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'state' is defined but never used.","line":66,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * store/generationStore.ts\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Zustand store for the Teacher Input Agent and overall generation state.\r\n * Manages custom instructions and the subprocess state of the final trigger.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { create } from \"zustand\";\r\n\r\nexport type GenerationStatus = \"idle\" | \"running\" | \"completed\" | \"failed\";\r\n\r\nexport interface SubprocessStep {\r\n    id: number;\r\n    label: string;\r\n    status: \"pending\" | \"running\" | \"completed\" | \"failed\";\r\n}\r\n\r\ninterface GenerationState {\r\n    teacherInput: string;\r\n    status: GenerationStatus;\r\n    currentStepIndex: number;\r\n    steps: SubprocessStep[];\r\n    error: string | null;\r\n\r\n    // Actions\r\n    setTeacherInput: (input: string) => void;\r\n    setStatus: (status: GenerationStatus) => void;\r\n    updateStep: (index: number, status: SubprocessStep[\"status\"]) => void;\r\n    setError: (msg: string | null) => void;\r\n    startGeneration: () => void;\r\n    reset: () => void;\r\n}\r\n\r\nconst INITIAL_STEPS: SubprocessStep[] = [\r\n    { id: 0, label: \"Validating Inputs\", status: \"pending\" },\r\n    { id: 1, label: \"Initiating AI Generation\", status: \"pending\" },\r\n    { id: 2, label: \"Generating Questions\", status: \"pending\" },\r\n    { id: 3, label: \"Applying Bloom Distribution\", status: \"pending\" },\r\n    { id: 4, label: \"Formatting Paper\", status: \"pending\" },\r\n    { id: 5, label: \"Finalizing Output\", status: \"pending\" },\r\n    { id: 6, label: \"Completed\", status: \"pending\" },\r\n];\r\n\r\nexport const useGenerationStore = create<GenerationState>((set) => ({\r\n    teacherInput: \"\",\r\n    status: \"idle\",\r\n    currentStepIndex: 0,\r\n    steps: INITIAL_STEPS,\r\n    error: null,\r\n\r\n    setTeacherInput: (teacherInput) => set({ teacherInput }),\r\n\r\n    setStatus: (status) => set({ status }),\r\n\r\n    updateStep: (index, status) => set((state) => {\r\n        const newSteps = [...state.steps];\r\n        if (newSteps[index]) {\r\n            newSteps[index] = { ...newSteps[index], status };\r\n        }\r\n        return { steps: newSteps, currentStepIndex: index };\r\n    }),\r\n\r\n    setError: (error) => set({ error }),\r\n\r\n    startGeneration: () => set((state) => ({\r\n        status: \"running\",\r\n        error: null,\r\n        steps: INITIAL_STEPS.map((s, i) => i === 0 ? { ...s, status: \"running\" } : s)\r\n    })),\r\n\r\n    reset: () => set({\r\n        teacherInput: \"\",\r\n        status: \"idle\",\r\n        currentStepIndex: 0,\r\n        steps: INITIAL_STEPS,\r\n        error: null,\r\n    }),\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\patternStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'state' is defined but never used.","line":115,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":115,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * store/patternStore.ts\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Zustand store for the Paper Pattern Agent.\r\n * Tracks sections, marks tally, and subprocess progress.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { create } from \"zustand\";\r\n\r\nexport interface PatternSection {\r\n    id: string;\r\n    name: string;\r\n    type: string;\r\n    numQuestions: number;\r\n    marksPerQuestion: number;\r\n    totalMarks: number;\r\n}\r\n\r\nexport type PatternStatus = \"idle\" | \"running\" | \"completed\" | \"failed\";\r\n\r\nexport interface SubprocessStep {\r\n    id: number;\r\n    label: string;\r\n    status: \"pending\" | \"running\" | \"completed\" | \"failed\";\r\n}\r\n\r\ninterface PatternState {\r\n    sections: PatternSection[];\r\n    totalMarks: number; // Target marks from metadata\r\n    status: PatternStatus;\r\n    steps: SubprocessStep[];\r\n    error: string | null;\r\n\r\n    // Actions\r\n    setTotalMarks: (marks: number) => void;\r\n    addSection: (section: Omit<PatternSection, \"id\" | \"totalMarks\">) => void;\r\n    setSections: (sections: PatternSection[]) => void;\r\n    updateSection: (id: string, updates: Partial<PatternSection>) => void;\r\n    deleteSection: (id: string) => void;\r\n    setStatus: (status: PatternStatus) => void;\r\n    updateStep: (index: number, status: SubprocessStep[\"status\"]) => void;\r\n    setError: (msg: string | null) => void;\r\n    reset: () => void;\r\n    startPatternProcess: () => void;\r\n    getTotalAllocated: () => number;\r\n}\r\n\r\nconst INITIAL_STEPS: SubprocessStep[] = [\r\n    { id: 0, label: \"Validating Pattern\", status: \"pending\" },\r\n    { id: 1, label: \"Calculating Weightage\", status: \"pending\" },\r\n    { id: 2, label: \"Optimizing Distribution\", status: \"pending\" },\r\n    { id: 3, label: \"Completed\", status: \"pending\" },\r\n];\r\n\r\nexport const usePatternStore = create<PatternState>((set, get) => ({\r\n    sections: [],\r\n    totalMarks: 80, // Default fallback\r\n    status: \"idle\",\r\n    steps: INITIAL_STEPS,\r\n    error: null,\r\n\r\n    setTotalMarks: (totalMarks) => set({ totalMarks }),\r\n\r\n    addSection: (data) => set((state) => {\r\n        const newSection: PatternSection = {\r\n            ...data,\r\n            id: crypto.randomUUID(),\r\n            totalMarks: data.numQuestions * data.marksPerQuestion\r\n        };\r\n        return { sections: [...state.sections, newSection] };\r\n    }),\r\n\r\n    setSections: (sections) => set({ sections }),\r\n\r\n    updateSection: (id, updates) => set((state) => {\r\n        const newSections = state.sections.map((s) => {\r\n            if (s.id === id) {\r\n                const updated = { ...s, ...updates };\r\n                updated.totalMarks = updated.numQuestions * updated.marksPerQuestion;\r\n                return updated;\r\n            }\r\n            return s;\r\n        });\r\n        return { sections: newSections };\r\n    }),\r\n\r\n    deleteSection: (id) => set((state) => ({\r\n        sections: state.sections.filter((s) => s.id !== id)\r\n    })),\r\n\r\n    setStatus: (status) => set({ status }),\r\n\r\n    updateStep: (index, status) => set((state) => {\r\n        const newSteps = [...state.steps];\r\n        if (newSteps[index]) {\r\n            newSteps[index] = { ...newSteps[index], status };\r\n        }\r\n        return { steps: newSteps };\r\n    }),\r\n\r\n    setError: (error) => set({ error }),\r\n\r\n    getTotalAllocated: () => {\r\n        return get().sections.reduce((acc, s) => acc + s.totalMarks, 0);\r\n    },\r\n\r\n    reset: () => set({\r\n        sections: [],\r\n        status: \"idle\",\r\n        steps: INITIAL_STEPS,\r\n        error: null\r\n    }),\r\n\r\n    startPatternProcess: () => set((state) => ({\r\n        status: \"running\",\r\n        error: null,\r\n        steps: INITIAL_STEPS.map((s, i) => i === 0 ? { ...s, status: \"running\" } : s)\r\n    })),\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\processingStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\projectStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\pyqStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'state' is defined but never used.","line":85,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * store/pyqStore.ts\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Zustand store for the PYQ Agent workflow.\r\n * Manages extraction status, current step, and input data for Previous Year Questions.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { create } from \"zustand\";\r\n\r\nexport type PyqStatus = \"idle\" | \"running\" | \"completed\" | \"failed\";\r\n\r\nexport interface SubprocessStep {\r\n    id: number;\r\n    label: string;\r\n    status: \"pending\" | \"running\" | \"completed\" | \"failed\";\r\n}\r\n\r\ninterface PyqState {\r\n    status: PyqStatus;\r\n    currentStepIndex: number;\r\n    steps: SubprocessStep[];\r\n    fileName: string | null;\r\n    textContent: string;\r\n    year: string;\r\n    board: string;\r\n    error: string | null;\r\n\r\n    // Actions\r\n    setStatus: (status: PyqStatus) => void;\r\n    setFileName: (name: string | null) => void;\r\n    setTextContent: (text: string) => void;\r\n    setYear: (year: string) => void;\r\n    setBoard: (board: string) => void;\r\n    updateStep: (index: number, status: SubprocessStep[\"status\"]) => void;\r\n    reset: () => void;\r\n    startProcessing: () => void;\r\n    setError: (msg: string | null) => void;\r\n}\r\n\r\nconst INITIAL_STEPS: SubprocessStep[] = [\r\n    { id: 0, label: \"Validating Distribution\", status: \"pending\" },\r\n    { id: 1, label: \"Mapping Questions to Levels\", status: \"pending\" },\r\n    { id: 2, label: \"Adjusting Difficulty\", status: \"pending\" },\r\n    { id: 3, label: \"Completed\", status: \"pending\" },\r\n];\r\n\r\nexport const usePyqStore = create<PyqState>((set) => ({\r\n    status: \"idle\",\r\n    currentStepIndex: 0,\r\n    steps: INITIAL_STEPS,\r\n    fileName: null,\r\n    textContent: \"\",\r\n    year: \"\",\r\n    board: \"\",\r\n    error: null,\r\n\r\n    setStatus: (status) => set({ status }),\r\n    setFileName: (fileName) => set({ fileName }),\r\n    setTextContent: (textContent) => set({ textContent }),\r\n    setYear: (year) => set({ year }),\r\n    setBoard: (board) => set({ board }),\r\n\r\n    updateStep: (index, status) => set((state) => {\r\n        const newSteps = [...state.steps];\r\n        if (newSteps[index]) {\r\n            newSteps[index] = { ...newSteps[index], status };\r\n        }\r\n        return { steps: newSteps, currentStepIndex: index };\r\n    }),\r\n\r\n    setError: (error) => set({ error }),\r\n\r\n    reset: () => set({\r\n        status: \"idle\",\r\n        currentStepIndex: 0,\r\n        steps: INITIAL_STEPS,\r\n        fileName: null,\r\n        textContent: \"\",\r\n        year: \"\",\r\n        board: \"\",\r\n        error: null\r\n    }),\r\n\r\n    startProcessing: () => set((state) => ({\r\n        status: \"running\",\r\n        currentStepIndex: 0,\r\n        steps: INITIAL_STEPS.map((s, i) => i === 0 ? { ...s, status: \"running\" } : s),\r\n        error: null\r\n    })),\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\qpilotConfigStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\qpilotStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'agentMode' is assigned a value but never used.","line":184,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":184,"endColumn":65},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'nextAgentKey' is assigned a value but never used.","line":196,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":196,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * store/qpilotStore.ts\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Zustand store for the QPilot Agent Execution interface.\r\n * Tracks agent status, active agent index, vertical progress, and paper content.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { create } from \"zustand\";\r\n\r\nexport type AgentStatus = \"idle\" | \"running\" | \"completed\" | \"failed\";\r\n\r\nexport interface Agent {\r\n    id: string;\r\n    name: string;\r\n    status: AgentStatus;\r\n    progress: number;\r\n    description: string;\r\n}\r\n\r\nexport interface Question {\r\n    id: string;\r\n    number: number;\r\n    text: string;\r\n    marks: number;\r\n}\r\n\r\nexport interface PaperSection {\r\n    id: string;\r\n    title: string;\r\n    questions: Question[];\r\n}\r\n\r\nexport interface ChatMessage {\r\n    id: string;\r\n    sender: string;\r\n    role: \"teacher\" | \"orchestrator\" | \"agent\";\r\n    content: string;\r\n    timestamp: number;\r\n}\r\n\r\ninterface QPilotState {\r\n    status: \"idle\" | \"running\" | \"completed\" | \"failed\";\r\n    agents: Agent[];\r\n    activeAgentIndex: number;\r\n    verticalProgress: number;\r\n    paperContent: PaperSection[];\r\n\r\n    // Orchestrator State\r\n    pipelineStage: number;\r\n    activeAgent: string | null;\r\n    agentMode: {\r\n        syllabus: \"auto\" | \"manual\";\r\n        pyq: \"auto\" | \"manual\";\r\n        bloom: \"auto\" | \"manual\";\r\n        pattern: \"auto\" | \"manual\";\r\n        teacher: \"auto\" | \"manual\";\r\n    };\r\n    agentStatuses: {\r\n        syllabus: AgentStatus;\r\n        pyq: AgentStatus;\r\n        bloom: AgentStatus;\r\n        pattern: AgentStatus;\r\n        generation: AgentStatus;\r\n    };\r\n    chatMessages: ChatMessage[];\r\n\r\n    // Actions\r\n    setStatus: (status: QPilotState[\"status\"]) => void;\r\n    updateAgent: (index: number, updates: Partial<Agent>) => void;\r\n    setActiveAgentIndex: (index: number) => void;\r\n    setVerticalProgress: (progress: number) => void;\r\n    addQuestion: (sectionTitle: string, question: Omit<Question, \"id\">) => void;\r\n\r\n    // Orchestrator Actions\r\n    emitMessage: (sender: string, role: ChatMessage[\"role\"], content: string) => void;\r\n    setAgentStatus: (agent: keyof QPilotState[\"agentStatuses\"], status: AgentStatus) => void;\r\n    triggerNextAgent: () => void;\r\n    runAutoFillDemo: () => void;\r\n\r\n    reset: () => void;\r\n}\r\n\r\nconst INITIAL_AGENTS: Agent[] = [\r\n    { id: \"syllabus-fetch\", name: \"Syllabus Agent\", status: \"idle\", progress: 0, description: \"Retrieving official curriculum data\" },\r\n    { id: \"pyq-fetch\", name: \"PYQ Agent\", status: \"idle\", progress: 0, description: \"Fetching previous year questions\" },\r\n    { id: \"blueprint-build\", name: \"Blooxanomy Agent\", status: \"idle\", progress: 0, description: \"Designing cognitive weightage\" },\r\n    { id: \"blueprint-verify\", name: \"Paper Pattern Agent\", status: \"idle\", progress: 0, description: \"Verifying structural constraints\" },\r\n    { id: \"teacher-input\", name: \"Teacher Input Agent\", status: \"idle\", progress: 0, description: \"Final generation trigger\" },\r\n];\r\n\r\nexport const useQPilotStore = create<QPilotState>((set, get) => ({\r\n    status: \"idle\",\r\n    agents: INITIAL_AGENTS,\r\n    activeAgentIndex: -1,\r\n    verticalProgress: 0,\r\n    paperContent: [],\r\n\r\n    // Orchestrator Initial State\r\n    pipelineStage: 0,\r\n    activeAgent: null,\r\n    agentMode: {\r\n        syllabus: \"auto\",\r\n        pyq: \"auto\",\r\n        bloom: \"manual\",\r\n        pattern: \"manual\",\r\n        teacher: \"manual\"\r\n    },\r\n    agentStatuses: {\r\n        syllabus: \"idle\",\r\n        pyq: \"idle\",\r\n        bloom: \"idle\",\r\n        pattern: \"idle\",\r\n        generation: \"idle\",\r\n    },\r\n    chatMessages: [],\r\n\r\n    setStatus: (status) => set({ status }),\r\n\r\n    updateAgent: (index, updates) => set((state) => {\r\n        const newAgents = [...state.agents];\r\n        newAgents[index] = { ...newAgents[index], ...updates };\r\n        return { agents: newAgents };\r\n    }),\r\n\r\n    setActiveAgentIndex: (index) => set((state) => {\r\n        // Also update vertical progress based on index\r\n        const total = state.agents.length;\r\n        const verticalProgress = total > 0 ? ((index + 1) / total) * 100 : 0;\r\n        return { activeAgentIndex: index, verticalProgress };\r\n    }),\r\n\r\n    setVerticalProgress: (progress) => set({ verticalProgress: progress }),\r\n\r\n    addQuestion: (sectionTitle, questionData) => set((state) => {\r\n        const content = [...state.paperContent];\r\n        let section = content.find(s => s.title === sectionTitle);\r\n\r\n        if (!section) {\r\n            section = { id: crypto.randomUUID(), title: sectionTitle, questions: [] };\r\n            content.push(section);\r\n        }\r\n\r\n        const newQuestion: Question = {\r\n            ...questionData,\r\n            id: crypto.randomUUID(),\r\n        };\r\n\r\n        section.questions = [...section.questions, newQuestion];\r\n\r\n        return { paperContent: content };\r\n    }),\r\n\r\n    // Orchestrator Actions\r\n    emitMessage: (sender, role, content) => set((state) => ({\r\n        chatMessages: [\r\n            ...state.chatMessages,\r\n            { id: crypto.randomUUID(), sender, role, content, timestamp: Date.now() }\r\n        ]\r\n    })),\r\n\r\n    setAgentStatus: (agent, status) => set((state) => {\r\n        const statuses = { ...state.agentStatuses, [agent]: status };\r\n\r\n        // Map store key back to agents array index\r\n        const indexMap: Record<string, number> = {\r\n            syllabus: 0,\r\n            pyq: 1,\r\n            bloom: 2,\r\n            pattern: 3,\r\n            generation: 4\r\n        };\r\n\r\n        const index = indexMap[agent];\r\n        const newAgents = [...state.agents];\r\n        if (newAgents[index]) {\r\n            newAgents[index] = { ...newAgents[index], status };\r\n        }\r\n\r\n        return { agentStatuses: statuses, agents: newAgents };\r\n    }),\r\n\r\n    triggerNextAgent: () => {\r\n        const { activeAgentIndex, setActiveAgentIndex, agentMode } = get();\r\n        const nextIndex = activeAgentIndex + 1;\r\n\r\n        if (nextIndex < 5) {\r\n            const indexMap: Record<number, keyof QPilotState[\"agentMode\"]> = {\r\n                0: \"syllabus\",\r\n                1: \"pyq\",\r\n                2: \"bloom\",\r\n                3: \"pattern\",\r\n                4: \"teacher\"\r\n            };\r\n\r\n            const nextAgentKey = indexMap[nextIndex];\r\n\r\n            // Advance highlight\r\n            setActiveAgentIndex(nextIndex);\r\n\r\n            // If the next agent is manual, we DO NOT auto-trigger.\r\n            // Component level will handle the rest.\r\n        }\r\n    },\r\n\r\n    runAutoFillDemo: () => {\r\n        const { status, emitMessage, reset } = get();\r\n        if (status !== \"idle\") return;\r\n\r\n        reset();\r\n        emitMessage(\"Orchestrator\", \"orchestrator\", \"Demo data loaded. Starting generation pipeline...\");\r\n    },\r\n\r\n    reset: () => set({\r\n        status: \"idle\",\r\n        agents: INITIAL_AGENTS,\r\n        activeAgentIndex: -1,\r\n        verticalProgress: 0,\r\n        paperContent: [],\r\n        pipelineStage: 0,\r\n        activeAgent: null,\r\n        agentMode: {\r\n            syllabus: \"auto\",\r\n            pyq: \"auto\",\r\n            bloom: \"manual\",\r\n            pattern: \"manual\",\r\n            teacher: \"manual\"\r\n        },\r\n        agentStatuses: {\r\n            syllabus: \"idle\",\r\n            pyq: \"idle\",\r\n            bloom: \"idle\",\r\n            pattern: \"idle\",\r\n            generation: \"idle\",\r\n        },\r\n        chatMessages: [],\r\n    }),\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\store\\syllabusStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'state' is defined but never used.","line":75,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * store/syllabusStore.ts\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n * Zustand store for the Syllabus Agent workflow.\r\n * Manages the extraction status, current subprocess step, and polling logic state.\r\n * ─────────────────────────────────────────────────────────────────────────────\r\n */\r\n\r\nimport { create } from \"zustand\";\r\n\r\nexport type SyllabusStatus = \"idle\" | \"running\" | \"completed\" | \"failed\";\r\n\r\nexport interface SubprocessStep {\r\n    id: number;\r\n    label: string;\r\n    status: \"pending\" | \"running\" | \"completed\" | \"failed\";\r\n}\r\n\r\ninterface SyllabusState {\r\n    status: SyllabusStatus;\r\n    currentStepIndex: number;\r\n    steps: SubprocessStep[];\r\n    fileName: string | null;\r\n    textContent: string;\r\n    error: string | null;\r\n\r\n    // Actions\r\n    setStatus: (status: SyllabusStatus) => void;\r\n    setFileName: (name: string | null) => void;\r\n    setTextContent: (text: string) => void;\r\n    updateStep: (index: number, status: SubprocessStep[\"status\"]) => void;\r\n    reset: () => void;\r\n    startExtraction: () => void;\r\n    setError: (msg: string | null) => void;\r\n}\r\n\r\nconst INITIAL_STEPS: SubprocessStep[] = [\r\n    { id: 0, label: \"Validating Distribution\", status: \"pending\" },\r\n    { id: 1, label: \"Mapping Questions to Levels\", status: \"pending\" },\r\n    { id: 2, label: \"Adjusting Difficulty\", status: \"pending\" },\r\n    { id: 3, label: \"Completed\", status: \"pending\" },\r\n];\r\n\r\nexport const useSyllabusStore = create<SyllabusState>((set) => ({\r\n    status: \"idle\",\r\n    currentStepIndex: 0,\r\n    steps: INITIAL_STEPS,\r\n    fileName: null,\r\n    textContent: \"\",\r\n    error: null,\r\n\r\n    setStatus: (status) => set({ status }),\r\n    setFileName: (fileName) => set({ fileName }),\r\n    setTextContent: (textContent) => set({ textContent }),\r\n\r\n    updateStep: (index, status) => set((state) => {\r\n        const newSteps = [...state.steps];\r\n        if (newSteps[index]) {\r\n            newSteps[index] = { ...newSteps[index], status };\r\n        }\r\n        return { steps: newSteps, currentStepIndex: index };\r\n    }),\r\n\r\n    setError: (error) => set({ error }),\r\n\r\n    reset: () => set({\r\n        status: \"idle\",\r\n        currentStepIndex: 0,\r\n        steps: INITIAL_STEPS,\r\n        fileName: null,\r\n        textContent: \"\",\r\n        error: null\r\n    }),\r\n\r\n    startExtraction: () => set((state) => ({\r\n        status: \"running\",\r\n        currentStepIndex: 0,\r\n        steps: INITIAL_STEPS.map((s, i) => i === 0 ? { ...s, status: \"running\" } : s),\r\n        error: null\r\n    })),\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\tejas\\Desktop\\MAQPG\\QPilot\\frontend\\src\\types\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]